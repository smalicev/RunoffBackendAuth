(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4627:function(e,t,n){Promise.resolve().then(n.bind(n,6699))},6699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var i=n(3827),r=n(197),a=n(345),s=n.n(a),o=n(4090);function l(e){let[t,n]=(0,o.useState)(!1),r=t?{backgroundColor:"rgba(0, 255, 179, 0.216)",borderRadius:e.style?e.style.borderRadius:void 0,boxShadow:e.style?e.style.boxShadow:void 0}:void 0;return(0,i.jsx)("div",{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)},style:r,children:e.children})}var c=n(5024),d=n(3549),h=n(7175);function u(e){let{Hydrographs:t,paginatedHydrographs:n,accordionClick:r}=e,[a,s]=(0,o.useState)(1),l={width:"1rem",hegiht:"1rem",border:"0.25rem solid black",borderRadius:"0.25rem"};function u(e){s(e.target.id),console.log(n)}let m=a?a-1:0;return(0,i.jsx)(i.Fragment,{children:t&&n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.U,{children:n[m].map((e,t)=>(0,i.jsx)(d.Q,{onClick:()=>r(e.Id),id:e.Id,header:e.DateInserted?e.DateInserted:"No Date",children:(0,i.jsxs)("span",{children:[e.CatchmentName," with ",e.StormName]})},e.Id))},m),(0,i.jsx)("div",{children:n.map((e,t)=>(0,i.jsx)("button",{style:l,onClick:u,id:t+1,children:t+1},t))})," "]}):(0,i.jsx)(h.Fe,{})})}function m(e){let{totals:t,firstChild:n,secondChild:r,Hydrographs:a,paginatedHydrographs:s,accordionClick:o}=e,c={display:"flex",flexDirection:"column",rowGap:"1rem",justifyContent:"flex-start",height:"100vh",backgroundColor:"var(--main-bg-color)",padding:"2rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",ul:{display:"flex",flexDirection:"column",listStyleType:"none",rowGap:"1rem"}};return(0,i.jsx)("div",{children:(0,i.jsxs)("nav",{style:c,children:[(0,i.jsx)("div",{className:"sidebar-name-container",children:(0,i.jsx)("h1",{children:"Catchment Runoff Calculator"})}),(0,i.jsxs)("ul",{style:c.ul,children:[(0,i.jsx)(l,{children:(0,i.jsx)("h3",{children:"Schematic View (current view)"})}),(0,i.jsx)(l,{children:(0,i.jsx)("h3",{children:"Documentation (WIP - static page)"})})]}),(0,i.jsx)("h4",{children:"Tools"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",rowGap:"1rem",justifyContent:"space-around",padding:"1rem",borderTop:"2px solid rgba(92, 92, 92, 0.404)"},children:[n||null,r||null]}),(0,i.jsx)("h4",{children:"Previous Hydrographs"}),(0,i.jsx)(u,{accordionClick:o,paginatedHydrographs:s||null,Hydrographs:a})]})})}var p=n(703),x=n(7615);function g(e){let{attributes:t,listeners:n,setNodeRef:r,transform:a}=(0,x.O1)({id:e.id}),s=a?{transform:"translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)")}:void 0;return(0,i.jsx)("div",{ref:r,style:s,...n,...t,children:e.children})}var f={src:"/Dashboard/hydrosim/appl//_next/static/media/catchment.c866e452.svg",height:630,width:630,blurWidth:0,blurHeight:0};function y(e){let{style:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.default,{"data-type":"catchment",src:f,height:100,width:100,alt:"A logo of an urban street with buildings and other infrastructure",style:t})})}var b={src:"/Dashboard/hydrosim/appl//_next/static/media/storm.c2b018f6.svg",height:630,width:630,blurWidth:0,blurHeight:0};function j(e){let{style:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.default,{"data-type":"storm",src:b,height:100,width:100,alt:"A logo of a cloud with rainfall",style:t})})}function S(e){let{isOver:t,setNodeRef:n}=(0,x.Zj)({id:e.id}),r=e.currentStorm,a=e.currentCatchment,o=e.draggableCurrentStorm,l=e.draggableCurrentCatchment;return(0,i.jsx)("div",{ref:n,style:{border:t?"0.25rem solid rgba(0, 0, 0, .05)":void 0,backgroundColor:t?"rgba(0, 0, 0, .3)":void 0,borderRadius:"1rem"},children:(0,i.jsxs)("div",{className:s().hydrographContainer,children:[(0,i.jsxs)("div",{className:s().catchmentSlot,children:[" ",l||(0,i.jsx)(y,{style:{opacity:.5,borderRadius:"50%",boxShadow:"0 0 10px 5px gray"}})]}),(0,i.jsxs)("div",{className:s().stormSlot,children:[" ",o||(0,i.jsx)(j,{style:{opacity:.5,border:"solid 1px gray",borderRadius:"50%",boxShadow:"0 0 10px 5px gray"}})]}),a&&r?(0,i.jsxs)("div",{className:s().textSlot,children:[r.name," on ",(0,i.jsx)("br",{})," the ",a.name," catchment."]}):(0,i.jsxs)("div",{className:s().textSlot,children:["Runoff Hydrograph ",(0,i.jsx)("br",{}),"  ",(0,i.jsx)("br",{})," Drag & drop both catchment and storm icons to get started!"]})]})})}class v{intensityToValues(e){let t=[];return e.forEach((e,n)=>{t.push(this.timeStep/60*e)}),t}constructor(e=null,t,n=[0,15,30,45,60,75,90,105,120,135,150,165,180],i=[5,8,12,55,74,112,78,56,55,32,4,2,1]){var r;let a;this.timeData=n,this.timeStep=n[1]-n[0],this.precipitationDataIntensity=i,this.precipitationData=this.intensityToValues(this.precipitationDataIntensity),this.cumulativePrecipitation=(r=this.precipitationData,a=[],r.forEach((e,t)=>{let n=0;for(let e=0;e<=t;e++)n+=r[e];a.push(n)}),a),this.name=t,this.id=e}}class w{constructor(e=null,t,n=1,i=30,r=1,a=85,s=40){this.name=t,this.areaHectares=n,this.imperviousPercent=i,this.slopePercent=r,this.curveNumber=a,this.sParameter=1e3/a+10,this.flowLength=s,this.roughnessCoeff=this.imperviousPercent<=20?.013:.25,this.timeToPeak=this.imperviousPercent<=20?null:this.kinematicWaveK,this.id=e}}var _=n(6136),C=n(1196);function k(e){let{chartData:t,header:n}=e;return(0,i.jsxs)("div",{className:"chart-container",children:[(0,i.jsxs)("h2",{style:{textAlign:"center"},children:[" ",n]}),(0,i.jsx)(C.x1,{data:t,options:{responsive:!0,scales:{x:{title:{display:!0,text:"Time (minutes)"}},y:{title:{display:!0,text:"Runoff (m\xb3/s)"},min:0}},plugins:{legend:{position:"top"},title:{display:!0,text:"Simulated hydrograph based on the current catchment and storm"}}}})]})}function D(e){let{editingObject:t,editSubmission:n}=e,r=t?Object.keys(t):null,a=t?Object.values(t):null,s=["cumulativePrecipitation","timeStep","roughnessCoeff","sParameter","timeToPeak","id","precipitationData"],o={precipitationDataIntensity:"Precipitation (intensity - mm/hr)",timeData:"Time series (minutes)",name:"Name or description",areaHectares:"Area (hectares)",imperviousPercent:"Percent Impervious (%)",slopePercent:"Slope Percent (%)",curveNumber:"SCS Curve Number",flowLength:"Flow length (m)"},l={fontSize:"1.25rem"};return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:"1rem",padding:"2rem",border:"2px solid rgba(92, 92, 92, 0.404)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},className:"edit-menu",children:[(0,i.jsxs)("h2",{children:["Editing ",t.name]}),(0,i.jsxs)("form",{style:{display:"flex",flexDirection:"column",rowGap:"1rem",textAlign:"right",fontSize:"1.25rem"},children:[r.map((e,t)=>{if(!s.includes(e))return(0,i.jsxs)("label",{children:[o[e],": ",(0,i.jsx)("input",{style:l,name:e,defaultValue:a[t]},e)]},e)}),(0,i.jsx)("button",{style:{padding:"1rem",alignSelf:"right",fontSize:"1.5rem"},onClick:n,type:"button",children:" Submit Edits and Recalculate "})]})]})}function I(e){let{contextObject:t,mousePosition:n,editOnClick:r,deleteOnClick:a}=e,s={top:n.y,left:n.x,zIndex:10,position:"absolute",backgroundColor:"var(--main-bg-color)",padding:"0.5rem",fontSize:"1.5rem"},o={borderTop:"solid 1px rgba(92, 92, 92, 0.404)",borderBottom:"solid 1px rgba(92, 92, 92, 0.404)"};return t?(0,i.jsx)("div",{style:s,children:(0,i.jsxs)("ul",{style:{listStyleType:"none"},children:[(0,i.jsx)(l,{children:(0,i.jsxs)("li",{style:o,className:"contextMenu edit",children:["Edit ",t.name]})}),(0,i.jsx)(l,{children:(0,i.jsxs)("li",{style:o,className:"contextMenu delete",children:["Delete ",t.name]})})]})}):null}class N{valuesToIntensity(e){let t=[];return console.log(this.storm.cumulativePrecipitation),e.forEach((e,n)=>{t.push(e/(this.timeStep/60))}),t}calcKinematicWaveK(){let e=Math.max(...this.storm.precipitationDataIntensity);return console.log(e),this.catchment.flowLength**.6*this.catchment.roughnessCoeff**.6/(e**.4*(this.catchment.slopePercent/100)**.3)}scsLosses(e){let t=[],n=this.catchment.sParameter;return e.forEach((e,i)=>{t.push((e-.2*n)**2/(e+.8*n))}),t}linearIUH(){return{prePeakFlowFunc:e=>this.storm.timeStep/this.storm.timeStep*e,peakFlowFunc:e=>(e-Math.exp(-(this.storm.timeStep/this.kinematicWaveK)))/this.storm.timeStep,postPeakFlowFunc:(e,t)=>e*Math.exp(-(t-this.storm.timeStep)/this.kinematicWaveK)}}convolute(e){let t,n=[];return this.effectiveRunoff.forEach((t,i)=>{let r={},a=this.timeStep;r[this.timeStep*(i+1)]=e.peakFlowFunc(t);let s=0;for(console.log(e.peakFlowFunc(t)+"peak flow");e.postPeakFlowFunc(t,a)>.005&&s<1e3;)s++,r[a+this.timeStep*(i+1)]=e.postPeakFlowFunc(t,a+this.timeStep),a+=this.timeStep;n.push(r)}),console.log(n),t={},n.forEach((e,n)=>{for(let n in e)void 0===t[n]?t[n]=e[n]:t[n]+=e[n]}),t}generateTimeSeriesandIncRunoff(){for(let e in this.Time=[0],this.Value=[0],this.convolutions)this.Time.push(e),this.Value.push(this.convolutions[e]/100*this.catchment.areaHectares*1e4/(60*this.storm.timeStep))}constructor(e=null,t,n){this.timeStep=t.timeStep,this.timeToPeak=this.timeStep,this.storm=t,this.catchment=n,this.kinematicWaveK=this.calcKinematicWaveK(),this.effectiveRunoff=function(e){let t=[];for(let n=e.length-1;n>0;n--)t.push(e[n]-e[n-1]);return t.push(e[0]),t.reverse()}(this.scsLosses(this.storm.cumulativePrecipitation)),this.Value=null,this.Time=null,this.convolutions=this.convolute(this.linearIUH()),this.name="".concat(t.name," on ").concat(n.name),this.generateTimeSeriesandIncRunoff(),this.id=e,this.totalRunoff=this.storm.precipitationData.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares),this.totalLosses=this.effectiveRunoff.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares)}}function P(e){let{Id:t,Hydrographs:n}=e,[r,a]=(0,o.useState)(0),[c,d]=(0,o.useState)(0),[h,u]=(0,o.useState)(null),[p,f]=(0,o.useState)(!1),[b,_]=(0,o.useState)(null),[C,P]=(0,o.useState)(null),[R,T]=(0,o.useState)(null),[E,F]=(0,o.useState)(!1),[H,O]=(0,o.useState)(!1),[L,z]=(0,o.useState)({x:null,y:null}),[A,G]=(0,o.useState)(n),[V,M]=(0,o.useState)(null),[U,W]=(0,o.useState)(1),[K,Z]=(0,o.useState)(null);async function Q(){let e=await fetch("/api/hydrographs?userId=".concat(encodeURIComponent(t)),{method:"GET"}),n=await e.json();console.log(n),G(n)}(0,o.useEffect)(()=>{if(null!=A){let e;M(function(e){let t=[];if(!(e.length>5))return[e];for(let n=1;n<=e.length/5;n++){t.push([]);for(let i=0;i<5;i++)t[n-1].push(e[i*n])}return t}(A)),Z((e={},A.forEach(t=>{e[t.Id]=t}),console.log(e),e))}},[A]),(0,o.useEffect)(()=>{async function e(e){await fetch("/api/hydrographs/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}if(null!==C&&null!==b){let n=new N(0,b,C),i={Time:n.Time.toString(),Value:n.Value.toString(),userId:t,StormName:b.name.toString(),CatchmentName:C.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};T(n);try{e(i)}catch(e){console.error("error:",e)}Q()}},[C,b]);let J=(0,o.useRef)({}),Y=(0,i.jsx)(g,{id:"addCatchment",children:(0,i.jsx)(l,{style:{borderRadius:"10%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(y,{style:{borderRadius:"50%",zIndex:15}})})}),B=(0,i.jsx)(g,{id:"addStorm",children:(0,i.jsx)(l,{style:{borderRadius:"10%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(j,{style:{borderRadius:"50%",zIndex:15}})})});function q(){a(r+1),P(new w(r,"Default Catchment"))}async function X(){d(c+1),_(new v(c,"Default Storm"))}let $=R?{labels:"string"==typeof R.Time?R.Time.split(","):R.Time,datasets:[{label:"Runoff Curve",data:"string"==typeof R.Value?R.Value.split(","):R.Value}]}:null;return(0,i.jsx)(x.LB,{id:"1",onDragEnd:function(e){let{over:t}=e,n=null;if(null===t&&"storm"===e.active.id.slice(0,5)){_(null);return}if(null===t&&"catchment"===e.active.id.slice(0,9)){P(null);return}"addStorm"===e.active.id?n=X:"addCatchment"===e.active.id&&(n=q),u(t?t.id:null),t&&n&&n()},onDragStart:function(e){f(!1)},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:"100vh",width:"100%"},onClick:function(e){"contextMenu"!==e.target.className&&E&&F(!1),console.log(e.target.className),console.log(e.target.value),"contextMenu edit"===e.target.className&&(f(!1),f(!0)),"contextMenu delete"===e.target.className&&(H===C?P(null):H===b&&_(null))},children:[(0,i.jsx)(m,{accordionClick:function(e){console.log(e),console.log(K[e]),T(K[e])},paginatedHydrographs:V||null,totals:[{catchments:r},{storms:c}],firstChild:Y,secondChild:B,Hydrographs:A||n||[]}),(0,i.jsxs)("div",{onContextMenu:function(e){e.preventDefault(),f(!1),console.log(e.target.dataset.type),F(!1);let{over:t}=e;"storm"===e.target.dataset.type?(O(b),z({x:e.clientX,y:e.clientY}),F(!0)):"catchment"===e.target.dataset.type&&(O(C),z({x:e.clientX,y:e.clientY}),F(!0))},children:[(0,i.jsx)(S,{currentStorm:b,currentCatchment:C,draggableCurrentStorm:b?(0,i.jsx)(l,{style:{borderRadius:"10%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(g,{"data-type":"storm",id:"storm-"+b.id,children:(0,i.jsx)("div",{className:s().icon,"data-type":"storm",children:(0,i.jsx)(j,{"data-type":"storm",style:{borderRadius:"50%"}})})})}):null,id:"0",draggableCurrentCatchment:C?(0,i.jsx)(l,{style:{borderRadius:"10%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(g,{"data-type":"catchment",id:"catchment-"+C.id,children:(0,i.jsx)("div",{className:s().icon,"data-type":"catchment",children:(0,i.jsx)(y,{"data-type":"catchment",style:{borderRadius:"50%"}})})})}):null}),E?(0,i.jsx)(I,{contextObject:H,mousePosition:L}):null]}),(0,i.jsxs)("div",{style:{backgroundColor:"var(--main-bg-color)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",height:"100vh",width:"20%",padding:"2rem",overflow:"auto",display:"flex",flexDirection:"column",rowGap:"4rem"},children:[R?(0,i.jsx)(k,{chartData:$,header:R.name?R.name:"".concat(R.StormName," on ").concat(R.CatchmentName)}):(0,i.jsxs)("h4",{children:["Add a catchment and storm to get started. ",(0,i.jsx)("br",{})," ",(0,i.jsx)("br",{})]}),p?(0,i.jsx)(D,{editSubmission:function(){!function(){let e=document.querySelector("form").children;for(let t=0;t<e.length-1;t++)J.current[e[t].children[0].name]=e[t].children[0].value;console.log(J)}();let e=H.id;if(f(!1),H===b){let t=new v(e,J.current.name,J.current.timeData.split(",").map(e=>Number(e)),J.current.precipitationDataIntensity.split(",").map(e=>Number(e)));_(t),localStorage.setItem("currentStorm",JSON.stringify(t))}else if(H===C){let t=new w(e,J.current.name,Number(J.current.areaHectares),Number(J.current.imperviousPercent),Number(J.current.slopePercent),Number(J.current.curveNumber),Number(J.current.flowLength));P(t),localStorage.setItem("currentCatchment",JSON.stringify(t))}},editingObject:H}):null]})]})})}function R(e){let{isRegistering:t,handleNotRegistering:n,handleRegistering:r}=e,[a,s]=(0,o.useState)(""),[c,d]=(0,o.useState)(""),[h,u]=(0,o.useState)(""),[m,p]=(0,o.useState)(""),[x,g]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),S={padding:"0.5rem",fontSize:"1rem",width:"100%",border:"0.25rem solid lightskyblue",borderRadius:"0.5rem",backgroundColor:"lightskyblue"},v={display:"flex",flexDirection:"column",rowGap:"1rem",justifyContent:"center",backgroundColor:"white",padding:"2rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},w={padding:"0.25rem"},_=e=>{s(e.target.value)},C=e=>{d(e.target.value)},k=async e=>{e.preventDefault(),fetch("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(a),"&password=").concat(encodeURIComponent(c))}).then(e=>e.json()).then(e=>{console.log("Token:",e.access_token),localStorage.setItem("access_token",e.access_token),window.location.reload()}).catch(e=>console.error("Error:",e))},D=async e=>{if(e.preventDefault(),h===a&&j(!0),m===c&&y(!0),RegExp("(?=.*[^a-zA-Z0-9])(?=.*[A-Z]).+").test(c)&&!0===b&&!0===f)try{let e=await fetch("/api/Account/Register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:a,Password:c,ConfirmPassword:m})}),t=await e.text();console.log(t),200===t.status&&g(!0)}catch(e){throw Error("Problem with request")}},I=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{style:w,children:"Sign in to your account"}),(0,i.jsxs)("form",{onSubmit:k,style:v,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"email",children:"Email:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"email",id:"email",value:a,onChange:_})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"password",children:"Password:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"password",id:"password",value:c,onChange:C})]}),(0,i.jsx)(l,{style:{zIndex:"5"},children:(0,i.jsx)("button",{style:S,type:"submit",children:"Log in"})})]}),(0,i.jsxs)("h2",{children:["Don't have an account?",(0,i.jsx)("a",{style:{color:"blue",textDecoration:"underline"},onClick:r,children:" Sign up here."})]})]}),N=(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:w,children:"Sign up for Hydrosim"}),(0,i.jsxs)("form",{style:v,onSubmit:D,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"email",children:"Email:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"email",id:"email",value:a,onChange:_})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"confirmEmail",children:"Confirm Email:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"email",id:"confirmEmail",value:h,onChange:e=>{u(e.target.value)}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"password",children:"Password:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"password",id:"password",value:c,onChange:C})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{fontStyle:"italic"},htmlFor:"confirmPassword",children:"Confirm Password:"}),(0,i.jsx)("input",{style:{width:"100%"},type:"password",id:"confirmPassword",value:m,onChange:e=>{p(e.target.value)}})]}),(0,i.jsx)("button",{style:S,type:"submit",children:"Register Account"}),(0,i.jsxs)("span",{onClick:n,children:["Have an account already?",(0,i.jsx)("a",{style:{color:"blue",textDecoration:"underline"},children:" Click here to sign in. "})]})]})]});return(0,i.jsx)("div",{style:{position:"fixed",left:"50%",bottom:"50%",transform:"translate(-50%, 0%)",display:"flex",flexDirection:"column",rowGap:"1rem",zIndex:"12"},children:t?N:I})}r.ZP.register(_.f$),r.ZP.register(_.uw);var T={src:"/Dashboard/hydrosim/appl//_next/static/media/swmshare.6ec7dfb9.svg",height:337,width:1049,blurWidth:0,blurHeight:0},E=n(4823);function F(e){let{loginState:t,loginButton:n}=e;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",width:"100%",alignItems:"center",boxShadow:"rgba(0, 0, 0, 0.25) 5px 0px 6px",zIndex:"5"},children:[(0,i.jsx)(p.default,{src:T,height:200,width:200,alt:"the SwmShare Logo"}),t?(0,i.jsx)(E.Z,{variant:"contained",onClick:function(){localStorage.removeItem("access_token")},children:"Logout"}):(0,i.jsx)(E.Z,{variant:"contained",onClick:n,children:"Login"})]})}function H(){let[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)(null),[a,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(!1),p=async()=>{let e=localStorage.getItem("access_token");if(e&&t(!0),null!==e){let t=await fetch("/api/Account/UserInfo",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();l(n);let i=await fetch("/api/hydrographs?userId=".concat(encodeURIComponent(n.Id)),{method:"GET"});d(await i.json())}};return(0,o.useEffect)(()=>{p()},[]),(0,i.jsxs)("main",{className:s().main,style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(F,{loginState:!!a,loginButton:function(){t(!1),m(!1)}}),e?a?c?(0,i.jsx)(P,{Id:a.Id,Hydrographs:c}):(0,i.jsx)(h.Fe,{wrapperStyle:{margin:"auto",left:"35%",top:"35%"},height:"400",width:"400",children:" "}):(0,i.jsx)(P,{}):(0,i.jsx)(R,{isRegistering:u,handleNotRegistering:()=>{console.log("test"),m(!1),console.log(u)},handleRegistering:()=>m(!0)})]})}},345:function(e){e.exports={main:"page_main__GlU4n",display:"page_display__Qsd9Y","context-menu":"page_context-menu__Ax_XR",description:"page_description__86bsR",code:"page_code__9lUUd",icon:"page_icon__AYuK3",hydrographContainer:"page_hydrographContainer__9HsRc",catchmentSlot:"page_catchmentSlot__mzyiJ",stormSlot:"page_stormSlot__kaQWG",textSlot:"page_textSlot__1qIQa",center:"page_center__5oHG7","schematic-view":"page_schematic-view__Zx9ap",logo:"page_logo__7fc9l",card:"page_card__QV0Om",content:"page_content__kDoxQ",grid:"page_grid__f5Kdy",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[674,571,560,971,69,744],function(){return e(e.s=4627)}),_N_E=e.O()}]);