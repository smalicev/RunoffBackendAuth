(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4627:function(e,t,r){Promise.resolve().then(r.bind(r,591))},591:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eN}});var i=r(3827),n=r(197),a=r(4090),o=r(368);function s(e){let[t,r]=(0,a.useState)(!1),n=(0,o.Z)(),s=e.defaultStyle,l=e.style,c=t?{...s,backgroundColor:n.palette.primary.dark,border:l?l.border:void 0,borderRadius:l?l.borderRadius:void 0,boxShadow:l?l.boxShadow:void 0}:s;return(0,i.jsx)("div",{onMouseEnter:function(){r(!0)},onMouseLeave:function(){r(!1)},style:c,children:e.children})}r(7175);var l=r(703),c={src:"/Dashboard/hydrosim/appl//_next/static/media/documentation.dec892cc.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=r(4272),u=r(634),h=r(6285);let m={position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",rowGap:"2rem",transform:"translate(-50%, -50%)",bgcolor:"primary.dark",boxShadow:24,pt:2,px:4,pb:3};function p(){let[e,t]=a.useState(!1);(0,o.Z)();let r=()=>{t(!1)};return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(h.Z,{color:"secondary",variant:"contained",onClick:()=>{t(!0)},children:"Equation Sheet"}),(0,i.jsx)(u.Z,{open:e,onClose:r,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,i.jsxs)(d.Z,{color:"secondary.main",sx:{...m,width:"20rem"},children:[(0,i.jsx)("h2",{id:"child-modal-title",children:"Text in a child modal"}),(0,i.jsx)("p",{id:"child-modal-description",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit."}),(0,i.jsx)(h.Z,{color:"secondary",variant:"contained",onClick:r,children:"Close Child Modal"})]})})]})}function x(e){let{buttonLabel:t,icon:r,modalText:n,childModalText:s,fullDoc:l}=e,[c,x]=a.useState(!1);(0,o.Z)();let g=()=>{x(!0)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(h.Z,{sx:{color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"},onClick:g,children:[t," ",r]}),(0,i.jsx)(u.Z,{open:c,onClose:()=>{x(!1)},"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,i.jsxs)(d.Z,{color:"secondary.main",sx:{...m,width:"35rem"},children:[(0,i.jsx)("h2",{id:"parent-modal-title",children:"Summary"}),(0,i.jsx)("p",{id:"parent-modal-description",children:n}),(0,i.jsx)(p,{}),(0,i.jsx)(h.Z,{color:"secondary",variant:"contained",onClick:g,children:"Full Documentation"})]})})]})}var g=r(470);function y(e){let{title:t,firstChild:r,secondChild:n,DataObjectArray:a,accordionClick:s,modalText:d,childModalText:u}=e;(0,o.Z)();let h={backgroundColor:"primary.dark",display:"flex",color:"secondary.main",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",flexDirection:"column",rowGap:"1rem",justifyContent:"flex-start",minHeight:"70vh",height:"100%",padding:"1rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",ul:{display:"flex",flexDirection:"column",listStyleType:"none",rowGap:"1rem"}};return(0,i.jsx)(g.Z,{elevation:10,color:"secondary.main",sx:h,children:(0,i.jsxs)(g.Z,{elevation:20,sx:{color:"secondary.main",backgroundColor:"primary.main",height:"100%",padding:"1.5rem"},children:[(0,i.jsx)("h1",{children:t}),(0,i.jsx)("ul",{style:h.ul,children:(0,i.jsx)(x,{modalText:d,childModalText:"tet",buttonLabel:"Documentation",icon:(0,i.jsx)(l.default,{src:c,height:"3rem",width:"3rem",alt:"icon of a sheet of paper"})})}),"HydroSim"===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{children:"Tools"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",columnGap:"1rem",justifyContent:"space-around",padding:"1rem",borderTop:"2px solid #ffb300"},children:[r||null,n||null]})," "]}):null]})})}var b=r(7615);function f(e){let{attributes:t,listeners:r,setNodeRef:n,transform:a}=(0,b.O1)({id:e.id}),o=a?{transform:"translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)")}:void 0;return(0,i.jsx)("div",{ref:n,style:o,...r,...t,children:e.children})}var j=r(345),S=r.n(j),v={src:"/Dashboard/hydrosim/appl//_next/static/media/catchment.c866e452.svg",height:630,width:630,blurWidth:0,blurHeight:0};function w(e){let{style:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.default,{"data-type":"catchment",src:v,height:70,width:70,alt:"A logo of an urban street with buildings and other infrastructure",style:t})})}var C={src:"/Dashboard/hydrosim/appl//_next/static/media/storm.c2b018f6.svg",height:630,width:630,blurWidth:0,blurHeight:0};function Z(e){let{style:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.default,{"data-type":"storm",src:C,height:70,width:70,alt:"A logo of a cloud with rainfall",style:t})})}function k(e){let{isOver:t,setNodeRef:r}=(0,b.Zj)({id:e.id});e.currentStorm,e.currentCatchment;let n=e.draggableCurrentStorm,a=e.draggableCurrentCatchment;return(0,i.jsx)("div",{ref:r,style:{display:"flex",justifyContent:"center"},children:(0,i.jsxs)("div",{style:{border:t?"0.1rem solid rgba(0, 0, 0, 1)":void 0,backgroundColor:t?"rgba(0, 0, 0, 1)":void 0,boxShadow:t?"rgba(0, 0, 0, 0.25) 15px 20px 38px, rgba(0, 0, 0, 0.22) 0px 20px 20px":void 0,borderRadius:"1rem",display:"flex",flexDirection:"row",justifyContent:"center",columnGap:"2rem",padding:"2rem",width:"35rem",height:"12rem",backgroundColor:"rgba(225, 222, 228, 0.808)",borderRadius:"1rem",opacity:"0.9"},children:[(0,i.jsxs)("div",{className:S().catchmentSlot,children:[" ",a||(0,i.jsx)(w,{style:{opacity:.5,borderRadius:"50%",boxShadow:"0 0 10px 5px gray"}})]}),(0,i.jsxs)("div",{className:S().stormSlot,children:[" ",n||(0,i.jsx)(Z,{style:{opacity:.5,border:"solid 1px gray",borderRadius:"50%",boxShadow:"0 0 10px 5px gray"}})]})]})})}class I{intensityToValues(e){let t=[];return e.forEach((e,r)=>{t.push(this.timeStep/60*e)}),t}constructor(e=null,t,r=[0,15,30,45,60,75,90,105,120,135,150,165,180],i=[5,8,12,55,74,112,78,56,55,32,4,2,1]){var n;let a;this.timeData=r,this.timeStep=r[1]-r[0],this.precipitationDataIntensity=i,this.precipitationData=this.intensityToValues(this.precipitationDataIntensity),this.cumulativePrecipitation=(n=this.precipitationData,a=[],n.forEach((e,t)=>{let r=0;for(let e=0;e<=t;e++)r+=n[e];a.push(r)}),a),this.name=t,this.id=e}}class D{constructor(e=null,t,r=1,i=30,n=1,a=85,o=40){this.name=t,this.areaHectares=r,this.imperviousPercent=i,this.slopePercent=n,this.curveNumber=a,this.sParameter=1e3/a+10,this.flowLength=o,this.roughnessCoeff=this.imperviousPercent<=20?.013:.25,this.timeToPeak=this.imperviousPercent<=20?null:this.kinematicWaveK,this.id=e}}var T=r(6136),E=r(1196);function P(e){let{chartData:t,header:r,XLabel:n,YLabel:a,Context:s}=e,l=(0,o.Z)(),c={maintainAspectRatio:!1,responsive:!0,datasets:{line:{backgroundColor:l.palette.secondary.main,borderColor:l.palette.secondary.main}},elements:{line:{backgroundColor:l.palette.secondary.main}},scales:{x:{ticks:{color:"black"},grid:{color:"rgba(0,0,0,0.4)"},title:{display:!0,text:n,color:"black"}},y:{ticks:{color:"black"},grid:{color:"rgba(0,0,0,0.4)"},color:"rgba(255,255,255,0.3)",title:{display:!0,text:a,color:"black"},min:0}},plugins:{legend:{position:"top",labels:{color:"black"}},title:{display:!0,text:s,color:"black"}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{style:{width:"100%",alignItems:"center",justifyContent:"center",display:"flex",columnGap:"1rem"},children:[" ",r]}),(0,i.jsx)(d.Z,{minWidth:"24rem",minHeight:"24rem",bgcolor:l.palette.primary.main,sx:{padding:"1rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px",borderRadius:"2rem"},children:(0,i.jsx)(E.x1,{data:t,options:c})})]})}var _=r(5778),N=r(9186),O=r(1848),R={src:"/Dashboard/hydrosim/appl//_next/static/media/save.e6de3be2.svg",height:24,width:24,blurWidth:0,blurHeight:0},M={src:"/Dashboard/hydrosim/appl//_next/static/media/delete.3e7bd127.svg",height:24,width:24,blurWidth:0,blurHeight:0},L=r(9835);function H(e){let{editingObject:t,editSubmission:r,saveEdits:n,deleteButton:s,editButton:c}=e,[d,u]=(0,a.useState)(t||{}),m=(0,o.Z)();(0,a.useEffect)(()=>{u(t),console.log(d)},[t]);let p=["cumulativePrecipitation","timeStep","roughnessCoeff","sParameter","timeToPeak","id","precipitationData"],x={name:"Name",precipitationDataIntensity:"Precipitation (intensity - mm/hr)",timeData:"Time series (minutes)",areaHectares:"Area (hectares)",imperviousPercent:"Percent Impervious (%)",slopePercent:"Slope Percent (%)",curveNumber:"SCS Curve Number",flowLength:"Flow length (m)"};return(0,i.jsxs)(g.Z,{elevation:20,sx:{display:"flex",flexDirection:"column",bgcolor:"primary.main",rowGap:"0.5rem",padding:"2rem",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",borderRadius:"1rem"},children:[(0,i.jsx)(L.Z,{color:"secondary.main",sx:{fontSize:"2rem"},children:t.name}),(0,i.jsxs)("form",{style:{display:"flex",flexDirection:"column",rowGap:"1rem",textAlign:"right",fontSize:"1.25rem"},children:[(d?Object.keys(d):[]).map(e=>{if(!p.includes(e))return console.log(e,d[e]),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"filled",color:"secondary",children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:e,children:x[e]}),(0,i.jsx)(_.Z,{id:e,type:"text",label:e,sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:m.palette.secondary.main}},value:d[e],onChange:t=>{console.log("did change on option select"),u({...d,[e]:t.target.value})}})]},e)}),(0,i.jsxs)(h.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:()=>{console.log(d),r(d),c(d)},type:"button",children:["SUBMIT CHANGES "," "]}),(0,i.jsxs)(h.Z,{color:"secondary",variant:"contained",onClick:()=>{r(d),n(d)},type:"button",children:["SAVE AS NEW ","     ",(0,i.jsx)(l.default,{src:R,height:"10%",width:"10%",alt:"save icon"})]}),(0,i.jsxs)(h.Z,{color:"secondary",variant:"contained",onClick:()=>{s(d)},type:"button",children:["DELETE ","     ",(0,i.jsx)(l.default,{src:M,height:"10%",width:"10%",alt:"save icon"})]})]})]})}function W(e){let{contextObject:t,mousePosition:r,editOnClick:n,deleteOnClick:a}=e,o={top:r.y,left:r.x,zIndex:10,position:"absolute",backgroundColor:"var(--main-bg-color)",padding:"0.5rem",fontSize:"1.5rem"},l={borderTop:"solid 1px rgba(92, 92, 92, 0.404)",borderBottom:"solid 1px rgba(92, 92, 92, 0.404)"};return t?(0,i.jsx)("div",{style:o,children:(0,i.jsxs)("ul",{style:{listStyleType:"none"},children:[(0,i.jsx)(s,{children:(0,i.jsxs)("li",{style:l,className:"contextMenu edit",children:["Edit ",t.name]})}),(0,i.jsx)(s,{children:(0,i.jsxs)("li",{style:l,className:"contextMenu delete",children:["Delete ",t.name]})})]})}):null}class A{valuesToIntensity(e){let t=[];return console.log(this.storm.cumulativePrecipitation),e.forEach((e,r)=>{t.push(e/(this.timeStep/60))}),t}calcKinematicWaveK(){let e=Math.max(...this.storm.precipitationDataIntensity);return console.log(e),this.catchment.flowLength**.6*this.catchment.roughnessCoeff**.6/(e**.4*(this.catchment.slopePercent/100)**.3)}scsLosses(e){let t=[],r=this.catchment.sParameter;return e.forEach((e,i)=>{t.push((e-.2*r)**2/(e+.8*r))}),t}linearIUH(){return{prePeakFlowFunc:e=>this.storm.timeStep/this.storm.timeStep*e,peakFlowFunc:e=>(e-Math.exp(-(this.storm.timeStep/this.kinematicWaveK)))/this.storm.timeStep,postPeakFlowFunc:(e,t)=>e*Math.exp(-(t-this.storm.timeStep)/this.kinematicWaveK)}}convolute(e){let t,r=[];return this.effectiveRunoff.forEach((t,i)=>{let n={},a=this.timeStep;n[this.timeStep*(i+1)]=e.peakFlowFunc(t);let o=0;for(;e.postPeakFlowFunc(t,a)>.005&&o<1e3;)o++,n[a+this.timeStep*(i+1)]=e.postPeakFlowFunc(t,a+this.timeStep),a+=this.timeStep;r.push(n)}),t={},r.forEach((e,r)=>{for(let r in e)void 0===t[r]?t[r]=e[r]:t[r]+=e[r]}),t}generateTimeSeriesandIncRunoff(){for(let e in this.Time=[0],this.Value=[0],this.convolutions)this.Time.push(e),this.Value.push(this.convolutions[e]/100*this.catchment.areaHectares*1e4/(60*this.storm.timeStep))}constructor(e=null,t,r){this.timeStep=t.timeStep,this.timeToPeak=this.timeStep,this.storm=t,this.catchment=r,this.kinematicWaveK=this.calcKinematicWaveK(),this.effectiveRunoff=function(e){let t=[];for(let r=e.length-1;r>0;r--)t.push(e[r]-e[r-1]);return t.push(e[0]),t.reverse()}(this.scsLosses(this.storm.cumulativePrecipitation)),this.Value=null,this.Time=null,this.convolutions=this.convolute(this.linearIUH()),this.name="".concat(t.name," on ").concat(r.name),this.generateTimeSeriesandIncRunoff(),this.id=e,this.totalRunoff=this.storm.precipitationData.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares),this.totalLosses=this.effectiveRunoff.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares)}}var F=r(6566),G=r(5826),U=r(1975),V=r(4057),z=r(3584);function B(e){let{Id:t,Hydrographs:r,Catchments:n,Storms:l}=e,[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[g,j]=(0,a.useState)(n),[S,v]=(0,a.useState)(l),[C,T]=(0,a.useState)(null),[E,_]=(0,a.useState)(!1),[N,O]=(0,a.useState)(null),[R,M]=(0,a.useState)(null),[L,B]=(0,a.useState)(null),[q,K]=(0,a.useState)(!1),[Y,J]=(0,a.useState)(!1),[X,Q]=(0,a.useState)({x:null,y:null}),[$,ee]=(0,a.useState)(r),[et,er]=(0,a.useState)(eu(n)),[ei,en]=(0,a.useState)(eu(l)),[ea,eo]=(0,a.useState)(null),[es,el]=(0,a.useState)(null),ec=(0,o.Z)();function ed(e,t){return"catchment"===t?!Object.keys(et).includes(e)||et[e]:"storm"===t?!Object.keys(ei).includes(e)||ei[e]:void 0}function eu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(e=>{t[e.id]=e}),t}async function eh(){try{let e=await fetch("/api/storms?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=(await e.json()).map(e=>new I(e.Id,e.StormDescription,e.Time.split(",").map(e=>Number(e)),e.Value.split(",").map(e=>Number(e))));v(r),en(eu(r))}catch(e){console.log(e)}}async function em(){try{let e=await fetch("/api/UrbanCatchments?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=(await e.json()).map(e=>new D(e.Id,e.CatchmentDescription,Number(e.AreaHectares),Number(e.ImperviousPercent),Number(e.SlopePercent),Number(e.CurveNumber),Number(e.FlowLength)));j(r),er(eu(r))}catch(e){console.log(e)}}(0,a.useEffect)(()=>{null!==R?m(!0):null===R&&m(!1),null!==N?u(!0):null===N&&u(!1),null!==R&&null!==N&&(x(!0),B(new A(0,N,R)))},[R,N]);let ep={display:"block",backgroundColor:ec.palette.secondary.main},ex=(0,i.jsx)(f,{id:"addCatchment",children:(0,i.jsx)(s,{defaultStyle:{display:"flex",alignItems:"center",justifyContent:"center",border:"0.2rem solid rgba(0,0,0,0)"},style:{border:"0.2rem solid black",borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(w,{style:{borderRadius:"50%",zIndex:15}})})}),eg=(0,i.jsx)(f,{id:"addStorm",children:(0,i.jsx)(s,{defaultStyle:{display:"flex",alignItems:"center",justifyContent:"center",border:"0.2rem solid rgba(0,0,0,0)"},style:{border:"0.2rem solid black",borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(Z,{style:{borderRadius:"50%",zIndex:15}})})});async function ey(){let e=new D(null,"New Urban Catchment");e.id=await ew(e),M(e)}async function eb(){let e=new I(null,"New Default Storm");e.id=await ef(e),O(e)}async function ef(e){let r={Time:e.timeData.toString(),Value:e.precipitationDataIntensity.toString(),UserId:t,StormDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(ed(e.name,"storm"))try{let e=await fetch("/api/Storms/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status){eo("Success");let t=await e.json();return await eh(),t.Id}400===e.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}else el("Duplicate")}async function ej(e){try{let t=await fetch("/api/Storms/".concat(e.id?e.id:e.Id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===t.status?(eo("Success"),await eh(),O(null)):400===t.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}}async function eS(e){try{let t=await fetch("/api/UrbanCatchments/".concat(e.id?e.id:e.Id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===t.status?(eo("Success"),await em(),M(null)):400===t.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}}async function ev(e){let r={Time:e.timeData.toString(),Value:e.precipitationDataIntensity.toString(),UserId:t,StormDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(!0===ed(e.name,"storm")||ed(e.name,"storm").id===e.id)try{let t=e.id,i=await fetch("/api/Storms/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});console.log(i),200===i.status||204===i.status?(eo("Success"),await eh()):400===i.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}else el("Duplicate")}async function ew(e){let r={UserID:t,AreaHectares:e.areaHectares.toString(),ImperviousPercent:e.imperviousPercent.toString(),SlopePercent:e.slopePercent.toString(),CurveNumber:e.curveNumber.toString(),FlowLength:e.flowLength.toString(),CatchmentDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(ed(e.name,"catchment"))try{let e=await fetch("/api/UrbanCatchments/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status)return eo("Success"),await em(),(await e.json()).Id;400===e.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}else el("Duplicate")}async function eC(e){let r={Id:Number(e.id),UserID:t,AreaHectares:e.areaHectares.toString(),ImperviousPercent:e.imperviousPercent.toString(),SlopePercent:e.slopePercent.toString(),CurveNumber:e.curveNumber.toString(),FlowLength:e.flowLength.toString(),CatchmentDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]},i=e.id;if(!0===ed(e.name,"catchment")||ed(e.name,"catchment").id===e.id)try{let e=await fetch("/api/UrbanCatchments/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});200===e.status||204===e.status?(eo("Success"),await em()):400===e.status?eo("Error"):eo("Server Error")}catch(e){console.log(e)}else el("Duplicate")}let eZ=L?{labels:"string"==typeof L.Time?L.Time.split(","):L.Time,datasets:[{label:"Runoff Curve",data:"string"==typeof L.Value?L.Value.split(","):L.Value}]}:null;return(0,i.jsx)(b.LB,{id:"1",onDragEnd:function(e){let{over:t}=e,r=null;if(null===t&&"storm"===e.active.id.slice(0,5)){O(null);return}if(null===t&&"catchment"===e.active.id.slice(0,9)){M(null);return}"addStorm"===e.active.id?r=eb:"addCatchment"===e.active.id&&(r=ey),T(t?t.id:null),t&&r&&r()},onDragStart:function(e){_(!1)},children:(0,i.jsxs)(d.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"primary.contrastText",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:"70vh",height:"100%",width:"100%"},onClick:function(e){"contextMenu"!==e.target.className&&q&&K(!1),"contextMenu edit"===e.target.className&&(_(!1),_(!0)),"contextMenu delete"===e.target.className&&(Y===R?M(null):Y===N&&O(null))},children:[(0,i.jsx)(y,{modalText:(0,i.jsx)(F.U,{children:"\r\nThis method is the same method used in OTTSWMM. It calculates runoff based on urban and rural runoff using a linear unit hydrograph.\r\n\r\n"}),title:"HydroSim",firstChild:ex,secondChild:eg,DataObjectArray:$||r||[]}),(0,i.jsxs)(d.Z,{color:"primary.main",onContextMenu:function(e){e.preventDefault(),_(!1),K(!1);let{over:t}=e;"storm"===e.target.dataset.type?(J(N),Q({x:e.clientX,y:e.clientY}),K(!0)):"catchment"===e.target.dataset.type&&(J(R),Q({x:e.clientX,y:e.clientY}),K(!0))},sx:{display:"flex",height:"100%",flexDirection:"column",rowGap:"2rem"},children:[(0,i.jsxs)(d.Z,{height:"70%",sx:{display:"flex",columnGap:"3rem",alignItems:"center"},children:[(0,i.jsx)(G.Z,{in:c,children:(0,i.jsx)(d.Z,{children:N?(0,i.jsx)(H,{editSubmission:function(e){let t,r,i=e.id;!0===ed(e.name,"storm")||ed(e.name,"storm").id===e.id?("object"==typeof e.precipitationDataIntensity?t=e.precipitationDataIntensity.map(e=>Number(e)):"string"==typeof e.precipitationDataIntensity&&(t=e.precipitationDataIntensity.split(",").map(e=>Number(e))),"object"==typeof e.timeData?r=e.timeData.map(e=>Number(e)):"string"==typeof e.timeData&&(r=e.timeData.split(",").map(e=>Number(e))),O(new I(i,e.name,r,t))):el("Duplicate")},editingObject:N,saveEdits:ef,editButton:ev,deleteButton:ej}):null})}),(0,i.jsx)(G.Z,{in:h,appear:!1,children:(0,i.jsx)(d.Z,{children:R?(0,i.jsx)(H,{editSubmission:function(e){let t=e.id;!0===ed(e.name,"catchment")||ed(e.name,"catchment").id===e.id?M(new D(t,e.name,Number(e.areaHectares),Number(e.imperviousPercent),Number(e.slopePercent),Number(e.curveNumber),Number(e.flowLength))):el("Duplicate")},editingObject:R,saveEdits:ew,editButton:eC,deleteButton:eS}):null})})]}),(0,i.jsx)(k,{currentStorm:N,currentCatchment:R,draggableCurrentStorm:N?(0,i.jsx)(s,{defaultStyle:{display:"flex",alignItems:"center",justifyContent:"center",border:"0.2rem solid rgba(0,0,0,0)"},style:{border:"0.2rem solid black",borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(f,{"data-type":"storm",id:"storm-"+N.id,children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},"data-type":"storm",children:(0,i.jsx)(Z,{"data-type":"storm",style:{borderRadius:"50%"}})})})}):null,id:"0",draggableCurrentCatchment:R?(0,i.jsx)(s,{defaultStyle:{display:"flex",alignItems:"center",justifyContent:"center",border:"0.2rem solid rgba(0,0,0,0)"},style:{border:"0.2rem solid black",borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:(0,i.jsx)(f,{"data-type":"catchment",id:"catchment-"+R.id,children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},"data-type":"catchment",children:(0,i.jsx)(w,{"data-type":"catchment",style:{borderRadius:"50%"}})})})}):null}),q?(0,i.jsx)(W,{contextObject:Y,mousePosition:X}):null]}),(0,i.jsxs)(d.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",minHeight:"70vh",width:"20%",height:"100%",padding:"2rem",overflow:"auto",flexDirection:"column",rowGap:"4rem"},children:[(0,i.jsx)(G.Z,{in:p,children:(0,i.jsx)(d.Z,{sx:{display:"flex",flexDirection:"column",rowGap:"2rem"},children:L?(0,i.jsx)(P,{XLabel:"Time (minutes)",YLabel:"Runoff (cms)",Context:"Runoff Hydrograph",chartData:eZ,header:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.Z,{value:N?N.name:"",onChange:(e,t)=>{O(ei[t.id]?ei[t.id]:N)},disablePortal:!0,id:"combo-box-storms",options:S?S.map(e=>({label:e.name,id:e.id})):[""],sx:{width:"45%"},renderInput:e=>(0,i.jsx)(U.Z,{labelColor:"secondary",color:"secondary",sx:{color:"secondary.main",backgroundColor:"primary.main"},...e,label:"Storm"})}),"on",(0,i.jsx)(V.Z,{value:R?R.name:"",onChange:(e,t)=>{console.log(t),M(et[t.id]?et[t.id]:R)},disablePortal:!0,id:"combo-box-catchments",options:g?g.map(e=>({label:e.name,id:e.id})):[""],sx:{width:"45%"},renderInput:e=>(0,i.jsx)(U.Z,{labelColor:"secondary",color:"secondary",sx:{color:"secondary.main",backgroundColor:"primary.main"},...e,label:"Catchment"})})]})}):null})}),function(){switch(ea){case null:return null;case"Success":return(0,i.jsx)(z.Z,{style:ep,severity:"success",children:"Data saved."});case"Error":return(0,i.jsx)(z.Z,{style:ep,severity:"error",children:"Input error - please check your inputs."});case"Server Error":return(0,i.jsx)(z.Z,{style:ep,severity:"error",children:"Server error: service temporarily unavailable."});default:return(0,i.jsx)(z.Z,{style:ep,severity:"error",children:"Something unexpected occured. Please try again later."})}}(),function(){switch(es){case null:return null;case"Duplicate":return(0,i.jsx)(z.Z,{style:ep,onClose:()=>el(null),severity:"error",children:"Duplicate name detected - please use another name."});default:return(0,i.jsx)(z.Z,{style:ep,severity:"error",children:"Something unexpected occured. Please try again later."})}}()]})]})})}n.ZP.register(T.f$),n.ZP.register(T.uw);var q=r(2293),K=r(3206),Y=r(2961),J=r(4111),X=r(6608),Q=r(6100),$=r(2586);function ee(e){let{isRegistering:t,handleNotRegistering:r,handleRegistering:n}=e,[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[x,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!0),[S,v]=(0,a.useState)(!0),[w,C]=(0,a.useState)(null),[Z,k]=(0,a.useState)(null),[I,D]=(0,a.useState)(null),[T,E]=(0,a.useState)(null),[P,_]=(0,a.useState)(null),[R,M]=(0,a.useState)(!1),L=(0,o.Z)();L.palette.primary.main;let H=L.palette.secondary.main,W={display:"flex",width:"100%",flexDirection:"column",rowGap:"3rem",padding:"1rem",zIndex:"12",alignItems:"center",height:"100%",overflow:"auto"},A={bgcolor:"primary.main",display:"flex",borderRadius:"0.5rem",alignItems:"center",flexDirection:"column",width:"30%",rowGap:"2rem",justifyContent:"center",padding:"2rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},F={padding:"0.25rem",textAlign:"center"},G=()=>M(e=>!e),U=e=>{e.preventDefault()},V=e=>{l(e.target.value)},B=e=>{u(e.target.value)},ee=async e=>{e.preventDefault(),fetch("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(s),"&password=").concat(encodeURIComponent(c))}).then(e=>e.json()).then(e=>{console.log("Token:",e.access_token),console.log(e),console.log(s,c),localStorage.setItem("access_token",e.access_token),E(!0),window.location.reload()}).catch(e=>{console.error("Error:",e),E(!1)})},et=async e=>{if(e.preventDefault(),console.log(f),m===s?v(!0):v(!1),x===c?j(!0):j(!1),!0===Z&&!0===S&&!0===f)try{let e=await fetch("/api/Account/Register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:s,Password:c,ConfirmPassword:x})});if(200===e.status)b(!0),D(!0),r();else if(400===e.status){let t=await e.json();b(!1),D(!1),_(t.ModelState[""][1])}}catch(e){throw Error(e)}else D(!1)},er=(0,i.jsxs)(d.Z,{style:W,children:[(0,i.jsx)("h2",{style:F,children:"Sign in to your account"}),(0,i.jsxs)(d.Z,{component:"form",autoComplete:"off",noValidate:!0,sx:A,children:[(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",color:"secondary",value:s,onChange:V,children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"email",children:"Email"}),(0,i.jsx)(Y.Z,{id:"email",type:"email",label:"Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",color:"secondary",value:c,onChange:B,children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"password",children:"Password"}),(0,i.jsx)(Y.Z,{color:"secondary",id:"password",type:R?"text":"password",endAdornment:(0,i.jsx)(J.Z,{position:"end",children:(0,i.jsx)(K.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:G,onMouseDown:U,edge:"end",children:R?(0,i.jsx)($.Z,{}):(0,i.jsx)(Q.Z,{})})}),label:"Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsx)(h.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:ee,type:"submit",children:"Sign in"})]}),(0,i.jsxs)("h2",{style:F,children:["Don't have an account? ",(0,i.jsx)(q.Z,{color:"secondary",onClick:n,href:"#",underline:"hover",children:"Sign up here."})]})]}),ei=(0,i.jsxs)(d.Z,{style:W,children:[(0,i.jsx)("h2",{style:F,children:"Sign up for SWMShare"}),(0,i.jsxs)(d.Z,{component:"form",autoComplete:"off",noValidate:!0,sx:A,children:[(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"email",children:"User Name"}),(0,i.jsx)(Y.Z,{id:"firstName",type:"text",label:"First Name",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:s,onChange:V,children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"email",children:"Email"}),(0,i.jsx)(Y.Z,{id:"email",type:"email",label:"Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:m,onChange:e=>{p(e.target.value)},children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"confirmEmail",children:"Confirm Email"}),(0,i.jsx)(Y.Z,{inputProps:{onBlur:e=>{s===m?v(!0):v(!1)}},id:"confirmEmail",type:"email",label:"Confirm Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(X.Z,{color:"secondary",children:[" ",S?null:"Emails do not match."," "]})]}),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:c,onChange:B,children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"password",children:"Password"}),(0,i.jsx)(Y.Z,{color:"secondary",inputProps:{onBlur:()=>{RegExp("(?=.*[^a-zA-Z0-9])(?=.*[A-Z]).+").test(c)?k(!0):k(!1)}},id:"password",type:R?"text":"password",endAdornment:(0,i.jsx)(J.Z,{position:"end",children:(0,i.jsx)(K.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:G,onMouseDown:U,edge:"end",children:R?(0,i.jsx)($.Z,{}):(0,i.jsx)(Q.Z,{})})}),label:"Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(X.Z,{color:"secondary",children:[" ",Z?null:null===Z?null:"Please enter a minimum 6-character password with at least one non-alphanumeric character and one uppercase character."," "]})]}),(0,i.jsxs)(O.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:x,onChange:e=>{g(e.target.value)},children:[(0,i.jsx)(N.Z,{color:"secondary",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,i.jsx)(Y.Z,{color:"secondary",inputProps:{onBlur:()=>{console.log(c===x),c===x?j(!0):j(!1)}},id:"confirmPassword",type:R?"text":"password",endAdornment:(0,i.jsx)(J.Z,{position:"end",children:(0,i.jsx)(K.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:G,onMouseDown:U,edge:"end",children:R?(0,i.jsx)($.Z,{}):(0,i.jsx)(Q.Z,{})})}),label:"Confirm Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(X.Z,{children:[" ",f?null:"Passwords do not match."," "]})]}),(0,i.jsx)(h.Z,{fullWidth:!0,color:"secondary",onClick:et,variant:"contained",type:"submit",children:"REGISTER"}),null===I?(0,i.jsx)("p",{}):I?(0,i.jsx)("p",{}):(0,i.jsxs)(z.Z,{severity:"error",children:["Registration failed."," ",null===P?null:P]})]}),(0,i.jsxs)("h2",{style:F,children:["Have an account already? ",(0,i.jsx)(q.Z,{color:"secondary",onClick:r,href:"#",underline:"hover",children:"Click here to sign in."})," "]})]});return(0,i.jsx)("div",{style:W,children:t?ei:er})}var et={src:"/Dashboard/hydrosim/appl//_next/static/media/swmshare.d98b5907.svg",height:337,width:1049,blurWidth:0,blurHeight:0},er=r(278),ei=r(6676),en=r(3580),ea=r(8740),eo=r(1403),es=r(697),el=r(4253),ec={src:"/Dashboard/hydrosim/appl//_next/static/media/appsPicker.8e31983c.svg",height:24,width:24,blurWidth:0,blurHeight:0},ed={src:"/Dashboard/hydrosim/appl//_next/static/media/logout.5bcc3c6e.svg",height:24,width:24,blurWidth:0,blurHeight:0},eu={src:"/Dashboard/hydrosim/appl//_next/static/media/wrench.6eea0321.svg",height:24,width:24,blurWidth:0,blurHeight:0},eh={src:"/Dashboard/hydrosim/appl//_next/static/media/rain.db20e2b2.svg",height:24,width:24,blurWidth:0,blurHeight:0},em={src:"/Dashboard/hydrosim/appl//_next/static/media/buildingRainGrass.c3294ecc.svg",height:1e3,width:1e3,blurWidth:0,blurHeight:0},ep={src:"/Dashboard/hydrosim/appl//_next/static/media/login.f73af510.svg",height:24,width:24,blurWidth:0,blurHeight:0},ex=function(e){let{pages:t,settings:r,appButton:n,loginButton:s,loginState:c,View:u}=e,[m,p]=a.useState(null),[x,y]=a.useState(null),[b,f]=a.useState(null),j=!!b;(0,o.Z)();let S={HydroSim:{Image:em,alt:"Icon showing a building with rain and grass"},StormTab:{Image:eh,alt:"Icon showing cloud with precipitation"}},v=e=>{f(null),n("string"==typeof e?e:u)},w=()=>{p(null)};return(0,i.jsx)(er.Z,{sx:{bgcolor:"primary.veryDark"},width:"100%",position:"static",children:(0,i.jsx)(eo.Z,{maxWidth:"xl",children:(0,i.jsxs)(ei.Z,{style:{display:"flex",justifyContent:"space-between"},disableGutters:!0,children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"2rem",justifyContent:"space-between"},children:[(0,i.jsx)(l.default,{src:et,height:150,width:150,alt:"the SwmShare Logo"}),c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(g.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"secondary.main"},elevation:40,children:(0,i.jsxs)(L.Z,{sx:{textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"black",variant:"h5",children:[" ","CREATE | MODEL | SIMULATE | SHARE"," "]})}),(0,i.jsx)(g.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"primary.veryDark"},elevation:40,children:(0,i.jsxs)(L.Z,{sx:{textAlign:"center",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"secondary.light",variant:"h7",children:[" ","Stormwater Management Modelling Toolbox"]})})]}),(0,i.jsx)(K.Z,{id:"basic-button",size:"large","aria-controls":j?"basic-menu":void 0,"aria-haspopup":"true",color:"inherit","aria-expanded":j?"true":void 0,onClick:e=>{e.stopPropagation(),f(e.currentTarget)},children:(0,i.jsxs)(d.Z,{sx:{backgroundColor:"inherit",display:"flex"},children:[(0,i.jsx)(l.default,{src:eu,height:40,width:40,style:{marginRight:"-1.5rem",marginTop:"-1rem"},alt:"Icon representing app list"}),"                                        ",(0,i.jsx)(l.default,{src:ec,height:50,width:50,alt:"Icon representing app list"})]})}),(0,i.jsx)(en.Z,{disableScrollLock:!0,id:"basic-menu",anchorEl:b,open:j,onClose:v,MenuListProps:{"aria-labelledby":"basic-button",disableScrollLock:"true",marginThreshold:"null"},children:t.map((e,t)=>(0,i.jsxs)(es.Z,{sx:{display:"flex",columnGap:"0.5rem"},onClick:()=>{v(e)},children:[e," ",(0,i.jsx)(l.default,{src:S[e].Image,height:30,width:30,alt:S[e].alt})]},e))})," "]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(g.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"secondary.main"},elevation:40,children:(0,i.jsxs)(L.Z,{sx:{textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"black",variant:"h5",children:[" ","CREATE | MODEL | SIMULATE | SHARE"," "]})}),(0,i.jsx)(g.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"primary.veryDark"},elevation:40,children:(0,i.jsxs)(L.Z,{sx:{textAlign:"center",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"secondary.light",variant:"h7",children:[" ","Stormwater Management Modelling Toolbox"]})})]})}),(0,i.jsxs)(d.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,i.jsx)(K.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{p(e.currentTarget)},color:"inherit",children:(0,i.jsx)(ea.Z,{})}),(0,i.jsx)(en.Z,{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!m,onClose:w,sx:{display:{xs:"block",md:"none"}},children:t.map(e=>(0,i.jsx)(es.Z,{onClick:w,children:(0,i.jsx)(L.Z,{textAlign:"center",children:e})},e))})]}),(0,i.jsx)(el.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}})]}),(0,i.jsxs)("div",{children:[c?(0,i.jsx)(K.Z,{onClick:()=>{n("Account")}}):null,c?(0,i.jsxs)(h.Z,{color:"secondary",variant:"contained",onClick:function(){localStorage.removeItem("access_token"),s()},style:{marginLeft:"0.5rem",display:"flex",justifyContent:"space-evenly",columnGap:"0.5rem",textAlign:"center",alignItems:"center"},size:"small",children:["SIGN OUT"," ",(0,i.jsx)(l.default,{src:ed,height:25,width:25,alt:"logout button (exit sign)"})]}):(0,i.jsxs)(h.Z,{color:"secondary",variant:"contained",size:"small",onClick:s,style:{marginLeft:"0.5rem",display:"flex",justifyContent:"space-evenly",columnGap:"0.5rem",textAlign:"center",alignItems:"center"},children:["SIGN IN",(0,i.jsx)(l.default,{src:ep,height:25,width:25,alt:"login button (entrance sign)"})]})]})]})})})};function eg(e){let{loginState:t,loginButton:r,accountViewButton:n,appViews:a,setView:o,appView:s}=e;return(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-around",width:"100%",alignItems:"center",boxShadow:"rgba(0, 0, 0, 0.25) 5px 0px 6px",zIndex:"5"},children:(0,i.jsx)(ex,{loginButton:r,loginState:t,appButton:o,pages:a,View:s,settings:["test"]})})}function ey(e){let{exitAccountViewButton:t}=e;return(0,i.jsxs)("div",{style:{position:"fixed",left:"50%",bottom:"50%",transform:"translate(-50%, 50%)",display:"flex",width:"30%",flexDirection:"column",rowGap:"3rem",zIndex:"12"},children:[(0,i.jsx)(h.Z,{size:"large",variant:"contained",onClick:t,children:"Back to Dashboard"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"Email"}),(0,i.jsx)("li",{children:localStorage.getItem("Email")}),(0,i.jsx)("li",{children:"History"}),(0,i.jsx)("li",{children:"Placeholder"})]})]})}class eb{generateTab(){return this.intensity=this.generatePrePeak().reverse().concat(this.generatePostPeak()),this.sortTime(),this.generateLastPoint(),this}generatePrePeak(){let e=[];for(let t=this.timestep;t<=this.roundToTimestep(this.peaktime);t+=this.timestep)e.push((this.a*(t/this.peaktime*(1-this.c)+this.b)/(t/this.peakRatio+this.b)**(1+this.c)).toFixed(2)),this.time.push(this.roundToTimestep(this.peaktime)-t);return e}roundToTimestep(e){return Math.round(e/this.timestep)*this.timestep}generatePostPeak(){let e=[];for(let t=0;t<=this.roundToTimestep(this.duration)-this.roundToTimestep(this.peaktime);t+=this.timestep)e.push((this.a*(t/(1-this.peakRatio)*(1-this.c)+this.b)/(t/(1-this.peakRatio)+this.b)**(1+this.c)).toFixed(2)),this.time.push(t+this.roundToTimestep(this.peaktime));return e}sortTime(){this.time.sort((e,t)=>e-t)}generateLastPoint(){let e=this.duration-this.peaktime;this.time[this.time.length-1]<this.duration&&(this.time.push(this.duration),this.intensity.push((this.a*(e/(1-this.peakRatio)*(1-this.c)+this.b)/(e/(1-this.peakRatio)+this.b)**(1+this.c)).toFixed(2)))}constructor(e,t,r,i,n,a,o){this.timestep=e,this.duration=t,this.a=r,this.b=i,this.c=n,this.peaktime=a,this.time=[],this.intensity=[],this.peakRatio=a/t,this.description=o}}function ef(e){let{submitButton:t,formInputs:r}=e,n=[a.useRef(""),a.useRef(""),a.useRef(""),a.useRef(""),a.useRef(""),a.useRef(""),a.useRef("")];return(0,i.jsxs)(g.Z,{elevation:20,component:"form",sx:{display:"flex",backgroundColor:"primary.main",flexDirection:"column",alignItems:"center",rowGap:"1rem",borderRadius:"1rem",padding:"2rem","& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[r.varNames.map((e,t)=>(0,i.jsx)(U.Z,{required:!0,color:"secondary",id:"outlined-number",label:r.varLabels[t],type:"number",InputLabelProps:{shrink:!0},inputRef:n[t]},r.varNames[t])),(0,i.jsx)(U.Z,{required:!0,id:"outlined-string",color:"secondary",label:"Description",type:"text",inputProps:{maxLength:48},InputLabelProps:{shrink:!0},inputRef:n[r.varNames.length]}),(0,i.jsx)(h.Z,{color:"secondary",variant:"contained",onClick:()=>{let e=[];n.forEach((t,r)=>{e.push(n[r].current.value)}),console.log(e),t(e)},children:"CALCULATE"})]})}var ej={src:"/Dashboard/hydrosim/appl//_next/static/media/sherman.db804aba.svg",height:37,width:92,blurWidth:0,blurHeight:0},eS=r(6520),ev=r(360),ew=r(4558),eC=r(4845),eZ=r(412),ek=r(8430);function eI(e){let{XLabel:t,YLabel:r,XData:n,YData:a}=e;return(0,o.Z)(),(0,i.jsx)(eC.Z,{sx:{padding:"1rem",backgroundColor:"primary.main",minWidth:150,maxWidth:250},component:g.Z,children:(0,i.jsxs)(eS.Z,{sx:{minWidth:150,maxWidth:250},size:"small","aria-label":"a dense table",children:[(0,i.jsx)(eZ.Z,{children:(0,i.jsxs)(ek.Z,{children:[(0,i.jsx)(ew.Z,{sx:{borderColor:"black"},children:t}),(0,i.jsx)(ew.Z,{align:"right",sx:{borderColor:"black"},children:r})]})}),(0,i.jsx)(ev.Z,{children:n.map((e,t)=>(0,i.jsxs)(ek.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(ew.Z,{sx:{borderColor:"black"},component:"th",scope:"row",children:n[t]}),(0,i.jsx)(ew.Z,{sx:{borderColor:"black"},align:"right",children:a[t]})]},n[t]))})]})})}function eD(e){let{Id:t,Storms:r}=e,[n,s]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[S,v]=(0,a.useState)({x:null,y:null}),[w,C]=(0,a.useState)(r),[Z,k]=(0,a.useState)(N([])),[I,D]=(0,a.useState)(null),[T,E]=(0,a.useState)(null),_=(0,o.Z)();function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],t={};return e.forEach(e=>{t[e.Id]=e}),t}async function O(){let e={Time:f.time.toString(),Value:f.intensity.toString(),userId:t,StormDescription:f.description.toString(),DateInserted:new Date().toISOString().split("T")[0]};try{let t=await fetch("/api/Storms/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log(t),200===t.status?(E("Success"),M(),k(N(w))):400===t.status?E("Error"):E("Server Error")}catch(e){console.log(e)}}async function M(){try{let e=await fetch("/api/Storms?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=await e.json();C(r),k(N(w))}catch(e){console.log(e)}}(0,a.useRef)({});let W={display:"block",backgroundColor:_.palette.secondary.main},A=f?{labels:"string"==typeof f.Time?f.Time.split(","):f.time,datasets:[{label:"Hyetograph (Chicago Storm Distribution)",data:"string"==typeof f.Value?f.Value.split(","):f.intensity}]}:null;return(0,i.jsxs)(d.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"primary.contrastText",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:"70vh",height:"100%",width:"100%"},onClick:function(e){"contextMenu"!==e.target.className&&m&&p(!1),"contextMenu edit"===e.target.className&&(u(!1),u(!0)),"contextMenu delete"===e.target.className&&(x===currentCatchment?setCurrentCatchment(null):x===f&&j(null))},children:[(0,i.jsx)(y,{accordionClick:function(e){j(Z[e])},DataObjectArray:w,title:"StormTab"}),(0,i.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",height:"100%"},children:[(0,i.jsxs)(g.Z,{elevation:10,sx:{backgroundColor:"secondary.main",opacity:"80%",padding:"1rem",rowGap:"1rem"},children:[(0,i.jsx)(L.Z,{variant:"h6",sx:{fontStyle:"italic"},children:"Sherman I-D Equation:"}),(0,i.jsx)(l.default,{"data-type":"sherman",src:ej,height:100,width:200,alt:"The Sherman I-D equation"})]}),(0,i.jsx)(ef,{formInputs:{varNames:["Timestep","Duration","a","b","c","TimeToPeak"],varLabels:["Timestep (minutes)","Duration (minutes)","Variable 'a'","Variable 'b'","Variable 'c'","Time-to-peak (minutes)"]},submitButton:function(e){let t=new eb(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4]),Number(e[5]),e[6]);t.generateTab(),j(t)}})]}),(0,i.jsxs)(d.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",minHeight:"70vh",width:"20%",height:"100%",padding:"2rem",overflow:"auto",flexDirection:"column",rowGap:"4rem"},children:[f?(0,i.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",rowGap:"2rem"},children:[(0,i.jsx)(P,{chartData:A,header:f.StormDescription,XLabel:"Time (minutes)",YLabel:"Intensity (mm/hr)",Context:"Rainfall Hyetograph based on provided inputs"}),(0,i.jsx)(eI,{bgcolor:"secondary",XLabel:"Time (minutes)",YLabel:" Rainfall Intensity (mm/hr)",XData:"string"==typeof f.Time?f.Time.split(","):f.time,YData:"string"==typeof f.Value?f.Value.split(","):f.intensity}),f.Id?null:(0,i.jsxs)(h.Z,{color:"secondary",variant:"contained",onClick:O,children:["SAVE",(0,i.jsx)(l.default,{src:R,height:"10%",width:"10%",alt:"save icon"})]}),function(){switch(T){case null:return null;case"Success":return(0,i.jsx)(z.Z,{style:W,severity:"success",children:"Data saved."});case"Error":return(0,i.jsx)(z.Z,{style:W,severity:"error",children:"Input error - please check your inputs."});case"Server Error":return(0,i.jsx)(z.Z,{style:W,severity:"error",children:"Server error: service temporarily unavailable."});default:return(0,i.jsx)(z.Z,{style:W,severity:"error",children:"Something unexpected occured. Please try again later."})}}()]}):null,c?(0,i.jsx)(H,{editingObject:x}):null]})]})}n.ZP.register(T.f$),n.ZP.register(T.uw);var eT=r(9136),eE=r(7155),eP=r(6910);function e_(){return(0,i.jsxs)(g.Z,{square:!0,elevation:2,sx:{color:"secondary.main",alignItems:"center",height:"8rem",backgroundColor:"primary.veryDark",justifyContent:"space-around",display:"flex"},children:[(0,i.jsx)("p",{children:"\xa9 2024 SWMShare."}),(0,i.jsx)(q.Z,{color:"secondary",href:"About",children:"About"})]})}function eN(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),[o,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),S="#ffb300",v=(0,eT.Z)({components:{MuiFormHelperText:{styleOverrides:{root:{color:S,"&$error":{color:S}}}},MuiTypography:{styleOverrides:{root:{fontFamily:"inherit"}}},MuiAutocomplete:{styleOverrides:{popper:{backgroundColor:S},listbox:{backgroundColor:S}}},MuiMenu:{styleOverrides:{list:{'&[role="menu"]':{backgroundColor:S,color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"}}}},MuiInputBase:{styleOverrides:{input:{color:"black"}}},MuiFormLabel:{styleOverrides:{root:{color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"}}}},palette:{primary:{littleLight:"#546e75",main:"#455a60",veryDark:"#273235"},secondary:{main:S}}});function w(){b(!1)}let C=async e=>{try{let t=await fetch("/api/Account/UserInfo",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),r=await t.json();localStorage.setItem("Email",r.Email),s(r);let i=await fetch("/api/UrbanCatchments?userId=".concat(encodeURIComponent(r.Id)),{method:"GET"}),n=(await i.json()).map(e=>new D(e.Id,e.CatchmentDescription,Number(e.ImperviousPercent),Number(e.SlopePercent),Number(e.CurveNumber),Number(e.FlowLength)));p(n);let a=await fetch("/api/Storms?userId=".concat(encodeURIComponent(r.Id)),{method:"GET"}),o=(await a.json()).map(e=>new I(e.Id,e.StormDescription,e.Time.split(",").map(e=>Number(e)),e.Value.split(",").map(e=>Number(e))));h(o),console.log(u)}catch(e){console.log(e)}};return(0,a.useEffect)(()=>{let e=localStorage.getItem("access_token");null!=e&&"undefined"!==e&&(t(!0),C(e))},[]),(0,i.jsx)(eE.Z,{theme:v,children:(0,i.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",bgcolor:"primary.dark",color:"primary.contrastText",height:"100%"},children:[(0,i.jsx)(eg,{loginState:!!e,appView:f,loginButton:function(){t(!1),g(!1)},accountViewButton:function(){j(!0)},appViews:["HydroSim","StormTab"],setView:function(e){j(e)}}),!0===e?o?function(){switch(f){case null:case"HydroSim":return u?(0,i.jsx)(B,{Id:o.Id,Storms:u,Catchments:m,Hydrographs:l}):(0,i.jsx)(d.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(eP.Z,{size:"4rem",color:"secondary"})});case"Account":return(0,i.jsx)(ey,{exitAccountViewButton:w});case"StormTab":return(0,i.jsx)(eD,{Id:o.Id,Storms:u})}}():(0,i.jsx)(B,{}):(0,i.jsx)(ee,{isRegistering:x,handleNotRegistering:()=>{g(!1)},handleRegistering:()=>g(!0)}),(0,i.jsx)(e_,{})]})})}},345:function(e){e.exports={main:"page_main__GlU4n",display:"page_display__Qsd9Y","context-menu":"page_context-menu__Ax_XR",description:"page_description__86bsR",code:"page_code__9lUUd",hydrographContainer:"page_hydrographContainer__9HsRc",catchmentSlot:"page_catchmentSlot__mzyiJ",stormSlot:"page_stormSlot__kaQWG",textSlot:"page_textSlot__1qIQa",center:"page_center__5oHG7","schematic-view":"page_schematic-view__Zx9ap",logo:"page_logo__7fc9l",card:"page_card__QV0Om",content:"page_content__kDoxQ",grid:"page_grid__f5Kdy",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[674,571,657,971,69,744],function(){return e(e.s=4627)}),_N_E=e.O()}]);