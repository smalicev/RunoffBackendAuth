(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8222:function(e,t,r){Promise.resolve().then(r.bind(r,4293))},4293:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eW}});var i=r(7437),n=r(433),a=r(9671),o=r.n(a),s=r(2265),l=r(2960);function c(e){let[t,r]=(0,s.useState)(!1),n=(0,l.Z)(),a=e.defaultStyle,o=e.style,c=t?{...a,backgroundColor:n.palette.primary.dark,border:o?o.border:void 0,borderRadius:o?o.borderRadius:void 0,boxShadow:o?o.boxShadow:void 0}:a;return(0,i.jsx)("div",{onMouseEnter:function(){r(!0)},onMouseLeave:function(){r(!1)},style:c,children:e.children})}r(7485);var d=r(6648),h={src:"/Dashboard/hydrosim/appl//_next/static/media/documentation.dec892cc.svg",height:24,width:24,blurWidth:0,blurHeight:0},u=r(1326),m=r(574),p=r(6548);let x={position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",rowGap:"2rem",transform:"translate(-50%, -50%)",bgcolor:"primary.dark",boxShadow:24,pt:2,px:4,pb:3};function g(){let[e,t]=s.useState(!1);(0,l.Z)();let r=()=>{t(!1)};return(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(p.Z,{color:"secondary",variant:"contained",onClick:()=>{t(!0)},children:"Equation Sheet"}),(0,i.jsx)(m.Z,{open:e,onClose:r,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,i.jsxs)(u.Z,{color:"secondary.main",sx:{...x,width:"20rem"},children:[(0,i.jsx)("h2",{id:"child-modal-title",children:"Text in a child modal"}),(0,i.jsx)("p",{id:"child-modal-description",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit."}),(0,i.jsx)(p.Z,{color:"secondary",variant:"contained",onClick:r,children:"Close Child Modal"})]})})]})}function f(e){let{buttonLabel:t,icon:r,modalText:n,childModalText:a,fullDoc:o}=e,[c,d]=s.useState(!1);(0,l.Z)();let h=()=>{d(!0)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(p.Z,{sx:{color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"},onClick:h,children:[t," ",r]}),(0,i.jsx)(m.Z,{open:c,onClose:()=>{d(!1)},"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,i.jsxs)(u.Z,{color:"secondary.main",sx:{...x,width:"35rem"},children:[(0,i.jsx)("h2",{id:"parent-modal-title",children:"Summary"}),(0,i.jsx)("p",{id:"parent-modal-description",children:n}),(0,i.jsx)(g,{}),(0,i.jsx)(p.Z,{color:"secondary",variant:"contained",onClick:h,children:"Full Documentation"})]})})]})}var b=r(4990);function y(e){let{title:t,tools:r,DataObjectArray:n,accordionClick:a,modalText:o,childModalText:s}=e;(0,l.Z)();let c={backgroundColor:"primary.dark",display:"flex",color:"secondary.main",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",flexDirection:"column",rowGap:"1rem",justifyContent:"flex-start",minHeight:"70vh",height:"100%",padding:"1rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",ul:{display:"flex",flexDirection:"column",listStyleType:"none",rowGap:"1rem"}};return(0,i.jsx)(b.Z,{elevation:10,color:"secondary.main",sx:c,children:(0,i.jsxs)(b.Z,{elevation:20,sx:{color:"secondary.main",backgroundColor:"primary.main",height:"100%",padding:"1.5rem"},children:[(0,i.jsx)("h1",{children:t}),(0,i.jsx)("ul",{style:c.ul,children:(0,i.jsx)(f,{modalText:o,childModalText:"tet",buttonLabel:"Documentation",icon:(0,i.jsx)(d.default,{src:h,height:"3rem",width:"3rem",alt:"icon of a sheet of paper"})})}),"HydroSim"===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{children:"Tools"}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"row",columnGap:"1rem",justifyContent:"space-around",padding:"1rem",borderTop:"2px solid #ffb300"},children:r||null})," "]}):null]})})}var j=r(8479);function v(e){let{attributes:t,listeners:r,setNodeRef:n,transform:a}=(0,j.O1)({id:e.id}),o=a?{transform:"translate3d(".concat(a.x,"px, ").concat(a.y,"px, 0)")}:void 0;return(0,i.jsx)("div",{ref:n,style:o,...r,...t,children:e.children})}var S={src:"/Dashboard/hydrosim/appl//_next/static/media/catchment.46adf884.svg",height:630,width:630,blurWidth:0,blurHeight:0};function w(e){let{empty:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d.default,{"data-type":"catchment",src:S,height:70,width:70,style:{opacity:t?.5:1,borderRadius:"50%",zIndex:15,boxShadow:t?"0 0 10px 5px gray":null},alt:"A logo of an urban street with buildings and other infrastructure"})})}var C={src:"/Dashboard/hydrosim/appl//_next/static/media/storm.9c0fbc7b.svg",height:630,width:630,blurWidth:0,blurHeight:0};function Z(e){let{empty:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d.default,{"data-type":"storm",src:C,height:70,width:70,alt:"A logo of a cloud with rainfall",style:{opacity:t?.5:1,borderRadius:"50%",zIndex:15,boxShadow:t?"0 0 10px 5px gray":null}})})}function k(e){let{isOver:t,setNodeRef:r}=(0,j.Zj)({id:e.id});e.currentStorm,e.currentCatchment;let n=e.draggableCurrentStorm,a=e.draggableCurrentCatchment;return(0,i.jsx)("div",{ref:r,style:{display:"flex",justifyContent:"center"},children:(0,i.jsxs)("div",{style:{border:t?"0.1rem solid rgba(0, 0, 0, 1)":void 0,backgroundColor:t?"rgba(0, 0, 0, 1)":void 0,boxShadow:t?"rgba(0, 0, 0, 0.25) 15px 20px 38px, rgba(0, 0, 0, 0.22) 0px 20px 20px":void 0,borderRadius:"1rem",display:"flex",flexDirection:"row",justifyContent:"center",columnGap:"2rem",padding:"2rem",width:"35rem",height:"12rem",backgroundColor:"rgba(225, 222, 228, 0.808)",borderRadius:"1rem",opacity:"0.9"},children:[(0,i.jsxs)("div",{className:o().catchmentSlot,children:[" ",a||(0,i.jsx)(w,{empty:!0})]}),(0,i.jsxs)("div",{className:o().stormSlot,children:[" ",n||(0,i.jsx)(Z,{empty:!0})]})]})})}function I(e){let t={};return e.forEach((e,r)=>{for(let r in e)void 0===t[r]?t[r]=e[r]:t[r]+=e[r]}),t}class D{intensityToValues(e){let t=[];return e.forEach((e,r)=>{t.push(this.timeStep/60*e)}),t}constructor(e=null,t,r=[0,15,30,45,60,75,90,105,120,135,150,165,180],i=[5,8,12,55,74,112,78,56,55,32,4,2,1]){var n;let a;this.timeData=r,this.timeStep=r[1]-r[0],this.precipitationDataIntensity=i,this.precipitationData=this.intensityToValues(this.precipitationDataIntensity),this.cumulativePrecipitation=(n=this.precipitationData,a=[],n.forEach((e,t)=>{let r=0;for(let e=0;e<=t;e++)r+=n[e];a.push(r)}),a),this.name=t,this.id=e}}class T{constructor(e=null,t,r=1){this.name=t,this.areaHectares=r,this.id=e}}class P extends T{constructor(e=null,t,r=1,i=30,n=1,a=85,o=40){super(e,t,r),this.imperviousPercent=i,this.slopePercent=n,this.curveNumber=a,this.sParameter=25400/a-254,this.flowLength=o,this.roughnessCoeff=this.imperviousPercent<=20?.013:.25,this.timeToPeak=this.kinematicWaveK,this.perviousArea=new R(null)}}class R extends T{airportMethod(){return 3.26*(1.1-this.runoffCoefficient)*this.flowLength**.5/this.slopePercent**(1/3)}bransbyWilliamsMethod(){return .057*this.flowLength/(this.slopePercent*this.areaHectares**.1)}constructor(e=null,t,r=1,i=1,n=1,a=30,o=40,s=.2,l=3){super(e,t,r),this.initialAbstraction=i,this.runoffCoefficient=s,this.slopePercent=n,this.curveNumber=a,this.sParameter=25400/a-254,this.flowLength=o,this.roughnessCoeff=.013,this.timeOfConcentration=s>=.4?this.bransbyWilliamsMethod():this.airportMethod(),this.numberOfReservoirs=l,this.timeToPeak=(this.numberOfReservoirs-1)/this.numberOfReservoirs*this.timeOfConcentration}}var E=r(5211),O=r(7346);function _(e){let{chartData:t,header:r,XLabel:n,YLabel:a,Context:o}=e,s=(0,l.Z)(),c={maintainAspectRatio:!1,responsive:!0,datasets:{line:{backgroundColor:s.palette.secondary.main,borderColor:s.palette.secondary.main}},elements:{line:{backgroundColor:s.palette.secondary.main}},scales:{x:{ticks:{color:"black"},grid:{color:"rgba(0,0,0,0.4)"},title:{display:!0,text:n,color:"black"}},y:{ticks:{color:"black"},grid:{color:"rgba(0,0,0,0.4)"},color:"rgba(255,255,255,0.3)",title:{display:!0,text:a,color:"black"},min:0}},plugins:{legend:{position:"top",labels:{color:"black"}},title:{display:!0,text:o,color:"black"}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{style:{width:"100%",alignItems:"center",justifyContent:"center",display:"flex",columnGap:"1rem"},children:[" ",r]}),(0,i.jsx)(u.Z,{minWidth:"24rem",minHeight:"24rem",bgcolor:s.palette.primary.main,sx:{padding:"1rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px",borderRadius:"2rem"},children:(0,i.jsx)(O.x1,{data:t,options:c})})]})}var N=r(5922),M=r(6065),L=r(8549),H={src:"/Dashboard/hydrosim/appl//_next/static/media/save.e6de3be2.svg",height:24,width:24,blurWidth:0,blurHeight:0},W={src:"/Dashboard/hydrosim/appl//_next/static/media/add.58f9e030.svg",height:24,width:24,blurWidth:0,blurHeight:0},F={src:"/Dashboard/hydrosim/appl//_next/static/media/delete.3e7bd127.svg",height:24,width:24,blurWidth:0,blurHeight:0},A=r(511);function U(e){let{editingObject:t,editSubmission:r,saveEdits:n,deleteButton:a,editButton:o}=e,[c,h]=(0,s.useState)(t||{}),m=(0,l.Z)();(0,s.useEffect)(()=>{h(t)},[t]);let x=["cumulativePrecipitation","timeStep","roughnessCoeff","sParameter","timeToPeak","id","precipitationData","perviousArea","timeOfConcentration","numberOfReservoirs","airportMethod","bransbyWilliamsMethod"],g={name:"Name",precipitationDataIntensity:"Precipitation (intensity - mm/hrs)",timeData:"Time series (minutes)",areaHectares:"Area (hectares)",imperviousPercent:"Percent Impervious (%)",slopePercent:"Slope Percent (%)",curveNumber:"SCS Curve Number",flowLength:"Flow length (m)",initialAbstraction:"Initial Abstraction (mm)",runoffCoefficient:"Runoff Coefficient (0 - 1)"};return(0,i.jsxs)(b.Z,{elevation:20,sx:{display:"flex",flexDirection:"column",bgcolor:"primary.main",rowGap:"0.5rem",padding:"2rem",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",borderRadius:"1rem"},children:[(0,i.jsx)(A.Z,{color:"secondary.main",sx:{fontSize:"2rem"},children:t.name}),(0,i.jsxs)("form",{style:{display:"flex",flexDirection:"column",rowGap:"1rem",textAlign:"right",fontSize:"1.25rem"},children:[(c?Object.keys(c):[]).map(e=>{if(!x.includes(e))return console.log(e,c[e]),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"filled",color:"secondary",children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:e,children:g[e]}),(0,i.jsx)(N.Z,{id:e,type:"text",label:e,sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:m.palette.secondary.main}},value:c[e],onChange:t=>{console.log("did change on option select"),h({...c,[e]:t.target.value})}})]},e)}),(0,i.jsxs)(u.Z,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:[(0,i.jsx)(p.Z,{color:"secondary",variant:"contained",onClick:()=>{console.log(c),r(c),o(c)},type:"button",children:(0,i.jsx)(d.default,{src:H,height:"10%",width:"10%",alt:"save icon"})}),(0,i.jsxs)(p.Z,{color:"secondary",variant:"contained",onClick:()=>{r(c),n(c)},type:"button",children:["NEW","     ",(0,i.jsx)(d.default,{src:W,height:"10%",width:"10%",alt:"add icon"})]}),(0,i.jsxs)(p.Z,{color:"secondary",variant:"contained",onClick:()=>{a(c)},type:"button",children:["     ",(0,i.jsx)(d.default,{src:F,height:"10%",width:"10%",alt:"delete icon"})]})]})]})]})}class G{valuesToIntensity(e){let t=[];return e.forEach((e,r)=>{t.push(e/(this.timeStep/60))}),t}calcKinematicWaveK(){let e=Math.max(...this.storm.precipitationDataIntensity);return this.catchment.flowLength**.6*this.catchment.roughnessCoeff**.6/(e**.4*(this.catchment.slopePercent/100)**.3)}scsLosses(e){let t=[],r=this.catchment.sParameter;return e.forEach((e,i)=>{t.push((e-.2*r)**2/(e+.8*r))}),t}convoluteRural(e){console.log(this.effectiveRunoff);let t=[];return this.effectiveRunoff.forEach((r,i)=>{let n={};this.timeStep,n[this.timeStep*(i+1)]=e.peakFlowFunc(r),t.push(n)}),I(t)}convoluteUrban(e){console.log(this.effectiveRunoff,"effRunoff");let t=[];return this.effectiveRunoff.forEach((r,i)=>{let n={},a=this.timeStep;n[this.timeStep*(i+1)]=e.peakFlowFunc(r);let o=0;for(;e.postPeakFlowFunc(r,a)>.005&&o<500;)o++,n[a+this.timeStep*(i+1)]=e.postPeakFlowFunc(r,a+this.timeStep),a+=this.timeStep;t.push(n)}),I(t)}generateTimeSeriesandIncRunoff(){for(let e in this.Time=[0],this.Value=[0],this.convolutions)this.Time.push(e),this.Value.push(this.convolutions[e]/100*this.catchment.areaHectares*1e4/(60*this.storm.timeStep))}constructor(e=null,t,r){this.instantaneousUnitHydrographs={UrbanCatchment:()=>({prePeakFlowFunc:e=>this.storm.timeStep/this.storm.timeStep*e,peakFlowFunc:e=>(e-Math.exp(-(this.storm.timeStep/this.kinematicWaveK)))/this.storm.timeStep,postPeakFlowFunc:(e,t)=>e*Math.exp(-(t-this.storm.timeStep)/this.kinematicWaveK)}),RuralCatchment:()=>({prePeakFlowFunc:e=>(this.storm.timeStep/this.catchment.timeToPeak)**(this.catchment.numberOfReservoirs-1)*Math.exp((1-this.catchment.numberOfReservoirs)*(this.storm.timeStep/this.catchment.timeToPeak-1))*e,peakFlowFunc:e=>(this.storm.timeStep/this.catchment.timeToPeak)**(this.catchment.numberOfReservoirs-1)*Math.exp((1-this.catchment.numberOfReservoirs)*(this.storm.timeStep/this.catchment.timeToPeak-1))*e,postPeakFlowFunc:e=>(this.storm.timeStep/this.catchment.timeToPeak)**(this.catchment.numberOfReservoirs-1)*Math.exp((1-this.catchment.numberOfReservoirs)*(this.storm.timeStep/this.catchment.timeToPeak-1))*e})},this.timeStep=t.timeStep,this.timeToPeak=this.timeStep,this.storm=t,this.catchment=r,this.kinematicWaveK=this.calcKinematicWaveK(),this.effectiveRunoff=function(e){let t=[];for(let r=e.length-1;r>0;r--)t.push(e[r]-e[r-1]);return t.push(e[0]),t.reverse()}(this.scsLosses(this.storm.cumulativePrecipitation)),this.Value=null,this.Time=null,this.convolutions="UrbanCatchment"===this.catchment.constructor.name?this.convoluteUrban(this.instantaneousUnitHydrographs[this.catchment.constructor.name]()):this.convoluteRural(this.instantaneousUnitHydrographs[this.catchment.constructor.name]()),this.name="".concat(t.name," on ").concat(r.name),this.generateTimeSeriesandIncRunoff(),this.id=e,this.totalRunoff=this.storm.precipitationData.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares),this.totalLosses=this.effectiveRunoff.reduce((e,t)=>e+t)/1e3*(1e4*this.catchment.areaHectares)}}var V=r(8904),z=r(5635),B=r(3808),q=r(9758),K=r(3494),J={src:"/Dashboard/hydrosim/appl//_next/static/media/rural.a4400e3c.svg",height:630,width:630,blurWidth:0,blurHeight:0};function X(e){let{empty:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d.default,{"data-type":"catchment",src:J,height:70,width:70,style:{opacity:t?.5:1,borderRadius:"50%",zIndex:15,boxShadow:t?"0 0 10px 5px gray":null},alt:"A logo of a rural area"})})}function Y(e){let{name:t,type:r=null}=e,n={UrbanCatchment:(0,i.jsx)(w,{}),RuralCatchment:(0,i.jsx)(X,{}),Storm:(0,i.jsx)(Z,{})};return(0,i.jsx)(v,{id:r?r+t:t,children:(0,i.jsx)(c,{defaultStyle:{display:"flex",alignItems:"center",justifyContent:"center",border:"0.2rem solid rgba(0,0,0,0)"},style:{border:"0.2rem solid black",borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},children:n[t]})})}function Q(e){let{Id:t,Hydrographs:r,Catchments:n,Storms:a}=e,[o,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[x,g]=(0,s.useState)(n),[f,b]=(0,s.useState)(a),[v,S]=(0,s.useState)(null),[w,C]=(0,s.useState)(!1),[Z,I]=(0,s.useState)(null),[E,O]=(0,s.useState)(null),[N,M]=(0,s.useState)(null),[L,H]=(0,s.useState)(!1),[W,F]=(0,s.useState)({x:null,y:null}),[A,J]=(0,s.useState)(r),[X,Q]=(0,s.useState)(es(n)),[$,ee]=(0,s.useState)(es(a)),[et,er]=(0,s.useState)(null),[ei,en]=(0,s.useState)(null),ea=(0,l.Z)();function eo(e,t){return"catchment"===t?!Object.keys(X).includes(e)||X[e]:"storm"===t?!Object.keys($).includes(e)||$[e]:void 0}function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(e=>{t[e.id]=e}),t}async function el(){try{let e=await fetch("/api/storms?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=(await e.json()).map(e=>new D(e.Id,e.StormDescription,e.Time.split(",").map(e=>Number(e)),e.Value.split(",").map(e=>Number(e))));b(r),ee(es(r))}catch(e){console.log(e)}}async function ec(){try{let e=await fetch("/api/UrbanCatchments?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=(await e.json()).map(e=>new T(e.Id,e.CatchmentDescription,Number(e.AreaHectares),Number(e.ImperviousPercent),Number(e.SlopePercent),Number(e.CurveNumber),Number(e.FlowLength)));g(r),Q(es(r))}catch(e){console.log(e)}}(0,s.useEffect)(()=>{null!==E?h(!0):null===E&&h(!1),null!==Z?c(!0):null===Z&&c(!1),null!==E&&null!==Z&&(p(!0),M(new G(0,Z,E)))},[E,Z]);let ed={display:"block",backgroundColor:ea.palette.secondary.main};async function eh(){let e=new P(null,"New Urban Catchment");e.id=await eb(e),O(e)}async function eu(){O(new R(null,"New Rural Catchment"))}async function em(){let e=new D(null,"New Default Storm");e.id=await ep(e),I(e)}async function ep(e){let r={Time:e.timeData.toString(),Value:e.precipitationDataIntensity.toString(),UserId:t,StormDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(eo(e.name,"storm"))try{let e=await fetch("/api/Storms/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status){er("Success");let t=await e.json();return await el(),t.Id}400===e.status?er("Error"):er("Server Error")}catch(e){console.log(e)}else en("Duplicate")}async function ex(e){try{let t=await fetch("/api/Storms/".concat(e.id?e.id:e.Id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===t.status?(er("Success"),await el(),I(null)):400===t.status?er("Error"):er("Server Error")}catch(e){console.log(e)}}async function eg(e){try{let t=await fetch("/api/UrbanCatchments/".concat(e.id?e.id:e.Id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===t.status?(er("Success"),await ec(),O(null)):400===t.status?er("Error"):er("Server Error")}catch(e){console.log(e)}}async function ef(e){let r={Time:e.timeData.toString(),Value:e.precipitationDataIntensity.toString(),UserId:t,StormDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(!0===eo(e.name,"storm")||eo(e.name,"storm").id===e.id)try{let t=e.id,i=await fetch("/api/Storms/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});200===i.status||204===i.status?(er("Success"),await el()):400===i.status?er("Error"):er("Server Error")}catch(e){console.log(e)}else en("Duplicate")}async function eb(e){let r={UserID:t,AreaHectares:e.areaHectares.toString(),ImperviousPercent:e.imperviousPercent.toString(),SlopePercent:e.slopePercent.toString(),CurveNumber:e.curveNumber.toString(),FlowLength:e.flowLength.toString(),CatchmentDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]};if(eo(e.name,"catchment"))try{let e=await fetch("/api/UrbanCatchments/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status)return er("Success"),await ec(),(await e.json()).Id;400===e.status?er("Error"):er("Server Error")}catch(e){console.log(e)}else en("Duplicate")}async function ey(e){let r={Id:Number(e.id),UserID:t,AreaHectares:e.areaHectares.toString(),ImperviousPercent:e.imperviousPercent.toString(),SlopePercent:e.slopePercent.toString(),CurveNumber:e.curveNumber.toString(),FlowLength:e.flowLength.toString(),CatchmentDescription:e.name.toString(),DateInserted:new Date().toISOString().split("T")[0]},i=e.id;if(!0===eo(e.name,"catchment")||eo(e.name,"catchment").id===e.id)try{let e=await fetch("/api/UrbanCatchments/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});200===e.status||204===e.status?(er("Success"),await ec()):400===e.status?er("Error"):er("Server Error")}catch(e){console.log(e)}else en("Duplicate")}let ej=N?{labels:"string"==typeof N.Time?N.Time.split(","):N.Time,datasets:[{label:"Runoff Curve",data:"string"==typeof N.Value?N.Value.split(","):N.Value}]}:null;return(0,i.jsx)(j.LB,{id:"1",onDragEnd:function(e){let{over:t}=e,r=null;if(console.log(e.active.id),null===t&&"Storm"===e.active.id){I(null);return}if(null===t&&("UrbanCatchment"===e.active.id||"RuralCatchment"===e.active.id)){O(null);return}"addStorm"===e.active.id?r=em:"addUrbanCatchment"===e.active.id?r=eh:"addRuralCatchment"===e.active.id&&(r=eu),S(t?t.id:null),t&&r&&r()},onDragStart:function(e){C(!1)},children:(0,i.jsxs)(u.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"primary.contrastText",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:"70vh",height:"100%",width:"100%"},onClick:function(e){},children:[(0,i.jsx)(y,{modalText:(0,i.jsx)(V.U,{children:"\r\nThis method is the same method used in OTTSWMM. It calculates runoff based on urban and rural runoff using a linear unit hydrograph.\r\n\r\n"}),title:"HydroSim",tools:["UrbanCatchment","Storm","RuralCatchment"].map((e,t)=>(0,i.jsx)(Y,{type:"add",name:e},t)),DataObjectArray:A||r||[]}),(0,i.jsxs)(u.Z,{color:"primary.main",sx:{display:"flex",height:"100%",flexDirection:"column",rowGap:"2rem"},children:[(0,i.jsxs)(u.Z,{height:"70%",sx:{display:"flex",columnGap:"3rem",alignItems:"center"},children:[(0,i.jsx)(z.Z,{in:o,children:(0,i.jsx)(u.Z,{children:Z?(0,i.jsx)(U,{editSubmission:function(e){let t,r,i=e.id;!0===eo(e.name,"storm")||eo(e.name,"storm").id===e.id?("object"==typeof e.precipitationDataIntensity?t=e.precipitationDataIntensity.map(e=>Number(e)):"string"==typeof e.precipitationDataIntensity&&(t=e.precipitationDataIntensity.split(",").map(e=>Number(e))),"object"==typeof e.timeData?r=e.timeData.map(e=>Number(e)):"string"==typeof e.timeData&&(r=e.timeData.split(",").map(e=>Number(e))),I(new D(i,e.name,r,t))):en("Duplicate")},editingObject:Z,saveEdits:ep,editButton:ef,deleteButton:ex}):null})}),(0,i.jsx)(z.Z,{in:d,appear:!1,children:(0,i.jsx)(u.Z,{children:E?(0,i.jsx)(U,{editSubmission:function(e){let t=e.id;!0===eo(e.name,"catchment")||eo(e.name,"catchment").id===e.id?O(new T(t,e.name,Number(e.areaHectares),Number(e.imperviousPercent),Number(e.slopePercent),Number(e.curveNumber),Number(e.flowLength))):en("Duplicate")},editingObject:E,saveEdits:eb,editButton:ey,deleteButton:eg}):null})})]}),(0,i.jsx)(k,{currentStorm:Z,currentCatchment:E,draggableCurrentStorm:Z?(0,i.jsx)(Y,{name:"Storm"}):null,id:"0",draggableCurrentCatchment:E?(0,i.jsx)(Y,{name:E.constructor.name}):null})]}),(0,i.jsxs)(u.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",minHeight:"70vh",minWidth:"29rem",width:"20%",height:"100%",padding:"2rem",overflow:"auto",flexDirection:"column",rowGap:"4rem"},children:[(0,i.jsx)(z.Z,{in:m,children:(0,i.jsx)(u.Z,{sx:{display:"flex",flexDirection:"column",rowGap:"2rem"},children:N?(0,i.jsx)(_,{XLabel:"Time (minutes)",YLabel:"Runoff (cms)",Context:"Runoff Hydrograph",chartData:ej,header:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.Z,{value:Z?Z.name:"",onChange:(e,t)=>{I($[t.id]?$[t.id]:Z)},disablePortal:!0,id:"combo-box-storms",options:f?f.map(e=>({label:e.name,id:e.id})):[""],sx:{width:"45%"},renderInput:e=>(0,i.jsx)(B.Z,{labelColor:"secondary",color:"secondary",sx:{color:"secondary.main",backgroundColor:"primary.main"},...e,label:"Storm"})}),"on",(0,i.jsx)(q.Z,{value:E?E.name:"",onChange:(e,t)=>{O(X[t.id]?X[t.id]:E)},disablePortal:!0,id:"combo-box-catchments",options:x?x.map(e=>({label:e.name,id:e.id})):[""],sx:{width:"45%"},renderInput:e=>(0,i.jsx)(B.Z,{labelColor:"secondary",color:"secondary",sx:{color:"secondary.main",backgroundColor:"primary.main"},...e,label:"Catchment"})})]})}):null})}),function(){switch(et){case null:return null;case"Success":return(0,i.jsx)(K.Z,{style:ed,severity:"success",children:"Data saved."});case"Error":return(0,i.jsx)(K.Z,{style:ed,severity:"error",children:"Input error - please check your inputs."});case"Server Error":return(0,i.jsx)(K.Z,{style:ed,severity:"error",children:"Server error: service temporarily unavailable."});default:return(0,i.jsx)(K.Z,{style:ed,severity:"error",children:"Something unexpected occured. Please try again later."})}}(),function(){switch(ei){case null:return null;case"Duplicate":return(0,i.jsx)(K.Z,{style:ed,onClose:()=>en(null),severity:"error",children:"Duplicate name detected - please use another name."});default:return(0,i.jsx)(K.Z,{style:ed,severity:"error",children:"Something unexpected occured. Please try again later."})}}()]})]})})}n.ZP.register(E.f$),n.ZP.register(E.uw);var $=r(1665),ee=r(335),et=r(5677),er=r(2326),ei=r(437),en=r(5764),ea=r(4050);function eo(e){let{isRegistering:t,handleNotRegistering:r,handleRegistering:n}=e,[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[f,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!0),[v,S]=(0,s.useState)(!0),[w,C]=(0,s.useState)(null),[Z,k]=(0,s.useState)(null),[I,D]=(0,s.useState)(null),[T,P]=(0,s.useState)(null),[R,E]=(0,s.useState)(null),[O,_]=(0,s.useState)(!1),N=(0,l.Z)();N.palette.primary.main;let H=N.palette.secondary.main,W={display:"flex",width:"100%",flexDirection:"column",rowGap:"3rem",padding:"1rem",zIndex:"12",alignItems:"center",height:"100%",overflow:"auto"},F={bgcolor:"primary.main",display:"flex",borderRadius:"0.5rem",alignItems:"center",flexDirection:"column",width:"30%",rowGap:"2rem",justifyContent:"center",padding:"2rem",boxShadow:"rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px"},A={padding:"0.25rem",textAlign:"center"},U=()=>_(e=>!e),G=e=>{e.preventDefault()},V=e=>{o(e.target.value)},z=e=>{d(e.target.value)},B=async e=>{e.preventDefault(),fetch("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(a),"&password=").concat(encodeURIComponent(c))}).then(e=>e.json()).then(e=>{console.log("Token:",e.access_token),console.log(e),console.log(a,c),localStorage.setItem("access_token",e.access_token),P(!0),window.location.reload()}).catch(e=>{console.error("Error:",e),P(!1)})},q=async e=>{if(e.preventDefault(),console.log(y),h===a?S(!0):S(!1),x===c?j(!0):j(!1),!0===Z&&!0===v&&!0===y)try{let e=await fetch("/api/Account/Register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:a,Password:c,ConfirmPassword:x})});if(200===e.status)b(!0),D(!0),r();else if(400===e.status){let t=await e.json();b(!1),D(!1),E(t.ModelState[""][1])}}catch(e){throw Error(e)}else D(!1)},J=(0,i.jsxs)(u.Z,{style:W,children:[(0,i.jsx)("h2",{style:A,children:"Sign in to your account"}),(0,i.jsxs)(u.Z,{component:"form",autoComplete:"off",noValidate:!0,sx:F,children:[(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",color:"secondary",value:a,onChange:V,children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"email",children:"Email"}),(0,i.jsx)(et.Z,{id:"email",type:"email",label:"Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",color:"secondary",value:c,onChange:z,children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"password",children:"Password"}),(0,i.jsx)(et.Z,{color:"secondary",id:"password",type:O?"text":"password",endAdornment:(0,i.jsx)(er.Z,{position:"end",children:(0,i.jsx)(ee.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:U,onMouseDown:G,edge:"end",children:O?(0,i.jsx)(ea.Z,{}):(0,i.jsx)(en.Z,{})})}),label:"Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsx)(p.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:B,type:"submit",children:"Sign in"})]}),(0,i.jsxs)("h2",{style:A,children:["Don't have an account? ",(0,i.jsx)($.Z,{color:"secondary",onClick:n,href:"#",underline:"hover",children:"Sign up here."})]})]}),X=(0,i.jsxs)(u.Z,{style:W,children:[(0,i.jsx)("h2",{style:A,children:"Sign up for SWMShare"}),(0,i.jsxs)(u.Z,{component:"form",autoComplete:"off",noValidate:!0,sx:F,children:[(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"email",children:"User Name"}),(0,i.jsx)(et.Z,{id:"firstName",type:"text",label:"First Name",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:a,onChange:V,children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"email",children:"Email"}),(0,i.jsx)(et.Z,{id:"email",type:"email",label:"Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}})]}),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:h,onChange:e=>{m(e.target.value)},children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"confirmEmail",children:"Confirm Email"}),(0,i.jsx)(et.Z,{inputProps:{onBlur:e=>{a===h?S(!0):S(!1)}},id:"confirmEmail",type:"email",label:"Confirm Email",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(ei.Z,{color:"secondary",children:[" ",v?null:"Emails do not match."," "]})]}),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:c,onChange:z,children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"password",children:"Password"}),(0,i.jsx)(et.Z,{color:"secondary",inputProps:{onBlur:()=>{RegExp("(?=.*[^a-zA-Z0-9])(?=.*[A-Z]).+").test(c)?k(!0):k(!1)}},id:"password",type:O?"text":"password",endAdornment:(0,i.jsx)(er.Z,{position:"end",children:(0,i.jsx)(ee.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:U,onMouseDown:G,edge:"end",children:O?(0,i.jsx)(ea.Z,{}):(0,i.jsx)(en.Z,{})})}),label:"Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(ei.Z,{color:"secondary",children:[" ",Z?null:null===Z?null:"Please enter a minimum 6-character password with at least one non-alphanumeric character and one uppercase character."," "]})]}),(0,i.jsxs)(L.Z,{fullWidth:!0,sx:{m:1},variant:"outlined",required:!0,color:"secondary",value:x,onChange:e=>{g(e.target.value)},children:[(0,i.jsx)(M.Z,{color:"secondary",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,i.jsx)(et.Z,{color:"secondary",inputProps:{onBlur:()=>{console.log(c===x),c===x?j(!0):j(!1)}},id:"confirmPassword",type:O?"text":"password",endAdornment:(0,i.jsx)(er.Z,{position:"end",children:(0,i.jsx)(ee.Z,{color:"secondary","aria-label":"toggle password visibility",onClick:U,onMouseDown:G,edge:"end",children:O?(0,i.jsx)(ea.Z,{}):(0,i.jsx)(en.Z,{})})}),label:"Confirm Password",sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:"black"},"&:hover > .MuiOutlinedInput-notchedOutline":{borderColor:H}}}),(0,i.jsxs)(ei.Z,{children:[" ",y?null:"Passwords do not match."," "]})]}),(0,i.jsx)(p.Z,{fullWidth:!0,color:"secondary",onClick:q,variant:"contained",type:"submit",children:"REGISTER"}),null===I?(0,i.jsx)("p",{}):I?(0,i.jsx)("p",{}):(0,i.jsxs)(K.Z,{severity:"error",children:["Registration failed."," ",null===R?null:R]})]}),(0,i.jsxs)("h2",{style:A,children:["Have an account already? ",(0,i.jsx)($.Z,{color:"secondary",onClick:r,href:"#",underline:"hover",children:"Click here to sign in."})," "]})]});return(0,i.jsx)("div",{style:W,children:t?X:J})}var es={src:"/Dashboard/hydrosim/appl//_next/static/media/swmshare.04769ce2.svg",height:337,width:1049,blurWidth:0,blurHeight:0},el=r(1733),ec=r(9806),ed=r(4480),eh=r(9504),eu=r(4587),em=r(5870),ep=r(9438),ex={src:"/Dashboard/hydrosim/appl//_next/static/media/appsPicker.8e31983c.svg",height:24,width:24,blurWidth:0,blurHeight:0},eg={src:"/Dashboard/hydrosim/appl//_next/static/media/logout.5bcc3c6e.svg",height:24,width:24,blurWidth:0,blurHeight:0},ef={src:"/Dashboard/hydrosim/appl//_next/static/media/wrench.6eea0321.svg",height:24,width:24,blurWidth:0,blurHeight:0},eb={src:"/Dashboard/hydrosim/appl//_next/static/media/rain.db20e2b2.svg",height:24,width:24,blurWidth:0,blurHeight:0},ey={src:"/Dashboard/hydrosim/appl//_next/static/media/buildingRainGrass.18742bc1.svg",height:1e3,width:1e3,blurWidth:0,blurHeight:0},ej={src:"/Dashboard/hydrosim/appl//_next/static/media/login.f73af510.svg",height:24,width:24,blurWidth:0,blurHeight:0},ev=function(e){let{pages:t,settings:r,appButton:n,loginButton:a,loginState:o,View:c}=e,[h,m]=s.useState(null),[x,g]=s.useState(null),[f,y]=s.useState(null),j=!!f;(0,l.Z)();let v={HydroSim:{Image:ey,alt:"Icon showing a building with rain and grass"},StormTab:{Image:eb,alt:"Icon showing cloud with precipitation"}},S=e=>{y(null),n("string"==typeof e?e:c)},w=()=>{m(null)};return(0,i.jsx)(el.Z,{sx:{bgcolor:"primary.veryDark"},width:"100%",position:"static",children:(0,i.jsx)(eu.Z,{maxWidth:"xl",children:(0,i.jsxs)(ec.Z,{style:{display:"flex",justifyContent:"space-between"},disableGutters:!0,children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"2rem",justifyContent:"space-between"},children:[(0,i.jsx)(d.default,{src:es,height:150,width:150,alt:"the SwmShare Logo"}),o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(b.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"secondary.main"},elevation:40,children:(0,i.jsxs)(A.Z,{sx:{textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"black",variant:"h5",children:[" ","CREATE | MODEL | SIMULATE | SHARE"," "]})}),(0,i.jsx)(b.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"primary.veryDark"},elevation:40,children:(0,i.jsxs)(A.Z,{sx:{textAlign:"center",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"secondary.light",variant:"h7",children:[" ","Stormwater Management Modelling Toolbox"]})})]}),(0,i.jsx)(ee.Z,{id:"basic-button",size:"large","aria-controls":j?"basic-menu":void 0,"aria-haspopup":"true",color:"inherit","aria-expanded":j?"true":void 0,onClick:e=>{e.stopPropagation(),y(e.currentTarget)},children:(0,i.jsxs)(u.Z,{sx:{backgroundColor:"inherit",display:"flex"},children:[(0,i.jsx)(d.default,{src:ef,height:40,width:40,style:{marginRight:"-1.5rem",marginTop:"-1rem"},alt:"Icon representing app list"}),"                                        ",(0,i.jsx)(d.default,{src:ex,height:50,width:50,alt:"Icon representing app list"})]})}),(0,i.jsx)(ed.Z,{disableScrollLock:!0,id:"basic-menu",anchorEl:f,open:j,onClose:S,MenuListProps:{"aria-labelledby":"basic-button",disableScrollLock:"true",marginThreshold:"null"},children:t.map((e,t)=>(0,i.jsxs)(em.Z,{sx:{display:"flex",columnGap:"0.5rem"},onClick:()=>{S(e)},children:[e," ",(0,i.jsx)(d.default,{src:v[e].Image,height:30,width:30,alt:v[e].alt})]},e))})," "]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(b.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"secondary.main"},elevation:40,children:(0,i.jsxs)(A.Z,{sx:{textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"black",variant:"h5",children:[" ","CREATE | MODEL | SIMULATE | SHARE"," "]})}),(0,i.jsx)(b.Z,{sx:{padding:"0.5rem",paddingRight:"1rem",paddingLeft:"1rem",backgroundColor:"primary.veryDark"},elevation:40,children:(0,i.jsxs)(A.Z,{sx:{textAlign:"center",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",fontWeight:"light"},color:"secondary.light",variant:"h7",children:[" ","Stormwater Management Modelling Toolbox"]})})]})}),(0,i.jsxs)(u.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,i.jsx)(ee.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{m(e.currentTarget)},color:"inherit",children:(0,i.jsx)(eh.Z,{})}),(0,i.jsx)(ed.Z,{id:"menu-appbar",anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!h,onClose:w,sx:{display:{xs:"block",md:"none"}},children:t.map(e=>(0,i.jsx)(em.Z,{onClick:w,children:(0,i.jsx)(A.Z,{textAlign:"center",children:e})},e))})]}),(0,i.jsx)(ep.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}})]}),(0,i.jsxs)("div",{children:[o?(0,i.jsx)(ee.Z,{onClick:()=>{n("Account")}}):null,o?(0,i.jsxs)(p.Z,{color:"secondary",variant:"contained",onClick:function(){localStorage.removeItem("access_token"),a()},style:{marginLeft:"0.5rem",display:"flex",justifyContent:"space-evenly",columnGap:"0.5rem",textAlign:"center",alignItems:"center"},size:"small",children:["SIGN OUT"," ",(0,i.jsx)(d.default,{src:eg,height:25,width:25,alt:"logout button (exit sign)"})]}):(0,i.jsxs)(p.Z,{color:"secondary",variant:"contained",onClick:a,style:{marginLeft:"0.5rem",display:"flex",justifyContent:"space-evenly",columnGap:"0.5rem",textAlign:"center",alignItems:"center"},size:"small",children:["SIGN IN",(0,i.jsx)(d.default,{src:ej,height:25,width:25,alt:"login button (entrance sign)"})]})]})]})})})};function eS(e){let{loginState:t,loginButton:r,accountViewButton:n,appViews:a,setView:o,appView:s}=e;return(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-around",minWidth:"100%",alignItems:"center",boxShadow:"rgba(0, 0, 0, 0.25) 5px 0px 6px",zIndex:"5"},children:(0,i.jsx)(ev,{loginButton:r,loginState:t,appButton:o,pages:a,View:s,settings:["test"]})})}function ew(e){let{exitAccountViewButton:t}=e;return(0,i.jsxs)("div",{style:{position:"fixed",left:"50%",bottom:"50%",transform:"translate(-50%, 50%)",display:"flex",width:"30%",flexDirection:"column",rowGap:"3rem",zIndex:"12"},children:[(0,i.jsx)(p.Z,{size:"large",variant:"contained",onClick:t,children:"Back to Dashboard"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"Email"}),(0,i.jsx)("li",{children:localStorage.getItem("Email")}),(0,i.jsx)("li",{children:"History"}),(0,i.jsx)("li",{children:"Placeholder"})]})]})}class eC{generateTab(){return this.intensity=this.generatePrePeak().reverse().concat(this.generatePostPeak()),this.sortTime(),this.generateLastPoint(),this}generatePrePeak(){let e=[];for(let t=this.timestep;t<=this.roundToTimestep(this.peaktime);t+=this.timestep)e.push((this.a*(t/this.peaktime*(1-this.c)+this.b)/(t/this.peakRatio+this.b)**(1+this.c)).toFixed(2)),this.time.push(this.roundToTimestep(this.peaktime)-t);return e}roundToTimestep(e){return Math.round(e/this.timestep)*this.timestep}generatePostPeak(){let e=[];for(let t=0;t<=this.roundToTimestep(this.duration)-this.roundToTimestep(this.peaktime);t+=this.timestep)e.push((this.a*(t/(1-this.peakRatio)*(1-this.c)+this.b)/(t/(1-this.peakRatio)+this.b)**(1+this.c)).toFixed(2)),this.time.push(t+this.roundToTimestep(this.peaktime));return e}sortTime(){this.time.sort((e,t)=>e-t)}generateLastPoint(){let e=this.duration-this.peaktime;this.time[this.time.length-1]<this.duration&&(this.time.push(this.duration),this.intensity.push((this.a*(e/(1-this.peakRatio)*(1-this.c)+this.b)/(e/(1-this.peakRatio)+this.b)**(1+this.c)).toFixed(2)))}constructor(e,t,r,i,n,a,o){this.timestep=e,this.duration=t,this.a=r,this.b=i,this.c=n,this.peaktime=a,this.time=[],this.intensity=[],this.peakRatio=a/t,this.description=o}}function eZ(e){let{submitButton:t,formInputs:r}=e,n=[s.useRef(""),s.useRef(""),s.useRef(""),s.useRef(""),s.useRef(""),s.useRef(""),s.useRef("")];return(0,i.jsxs)(b.Z,{elevation:20,component:"form",sx:{display:"flex",backgroundColor:"primary.main",flexDirection:"column",alignItems:"center",rowGap:"1rem",borderRadius:"1rem",padding:"2rem","& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[r.varNames.map((e,t)=>(0,i.jsx)(B.Z,{required:!0,color:"secondary",id:"outlined-number",label:r.varLabels[t],type:"number",InputLabelProps:{shrink:!0},inputRef:n[t]},r.varNames[t])),(0,i.jsx)(B.Z,{required:!0,id:"outlined-string",color:"secondary",label:"Description",type:"text",inputProps:{maxLength:48},InputLabelProps:{shrink:!0},inputRef:n[r.varNames.length]}),(0,i.jsx)(p.Z,{color:"secondary",variant:"contained",onClick:()=>{let e=[];n.forEach((t,r)=>{e.push(n[r].current.value)}),console.log(e),t(e)},children:"CALCULATE"})]})}var ek={src:"/Dashboard/hydrosim/appl//_next/static/media/sherman.796aba3a.svg",height:37,width:92,blurWidth:0,blurHeight:0},eI=r(6645),eD=r(8884),eT=r(6351),eP=r(2674),eR=r(4691),eE=r(7116);function eO(e){let{XLabel:t,YLabel:r,XData:n,YData:a}=e;return(0,l.Z)(),(0,i.jsx)(eP.Z,{sx:{padding:"1rem",backgroundColor:"primary.main",minWidth:150,maxWidth:250},component:b.Z,children:(0,i.jsxs)(eI.Z,{sx:{minWidth:150,maxWidth:250},size:"small","aria-label":"a dense table",children:[(0,i.jsx)(eR.Z,{children:(0,i.jsxs)(eE.Z,{children:[(0,i.jsx)(eT.Z,{sx:{borderColor:"black"},children:t}),(0,i.jsx)(eT.Z,{align:"right",sx:{borderColor:"black"},children:r})]})}),(0,i.jsx)(eD.Z,{children:n.map((e,t)=>(0,i.jsxs)(eE.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,i.jsx)(eT.Z,{sx:{borderColor:"black"},component:"th",scope:"row",children:n[t]}),(0,i.jsx)(eT.Z,{sx:{borderColor:"black"},align:"right",children:a[t]})]},n[t]))})]})})}function e_(e){let{Id:t,Storms:r}=e,[n,a]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[f,j]=(0,s.useState)({x:null,y:null}),[v,S]=(0,s.useState)(r),[w,C]=(0,s.useState)(P([])),[Z,k]=(0,s.useState)(null),[I,D]=(0,s.useState)(null),T=(0,l.Z)();function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],t={};return e.forEach(e=>{t[e.Id]=e}),t}async function R(){let e={Time:x.time.toString(),Value:x.intensity.toString(),userId:t,StormDescription:x.description.toString(),DateInserted:new Date().toISOString().split("T")[0]};try{let t=await fetch("/api/Storms/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log(t),200===t.status?(D("Success"),E(),C(P(v))):400===t.status?D("Error"):D("Server Error")}catch(e){console.log(e)}}async function E(){try{let e=await fetch("/api/Storms?userId=".concat(encodeURIComponent(t)),{method:"GET"}),r=await e.json();S(r),C(P(v))}catch(e){console.log(e)}}(0,s.useRef)({});let O={display:"block",backgroundColor:T.palette.secondary.main},N=x?{labels:"string"==typeof x.Time?x.Time.split(","):x.time,datasets:[{label:"Hyetograph (Chicago Storm Distribution)",data:"string"==typeof x.Value?x.Value.split(","):x.intensity}]}:null;return(0,i.jsxs)(u.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"primary.contrastText",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:"70vh",height:"100%",width:"100%"},onClick:function(e){},children:[(0,i.jsx)(y,{accordionClick:function(e){g(w[e])},DataObjectArray:v,title:"StormTab"}),(0,i.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",height:"100%"},children:[(0,i.jsxs)(b.Z,{elevation:10,sx:{backgroundColor:"secondary.main",opacity:"80%",padding:"1rem",rowGap:"1rem"},children:[(0,i.jsx)(A.Z,{variant:"h6",sx:{fontStyle:"italic"},children:"Sherman I-D Equation:"}),(0,i.jsx)(d.default,{"data-type":"sherman",src:ek,height:100,width:200,alt:"The Sherman I-D equation"})]}),(0,i.jsx)(eZ,{formInputs:{varNames:["Timestep","Duration","a","b","c","TimeToPeak"],varLabels:["Timestep (minutes)","Duration (minutes)","Variable 'a'","Variable 'b'","Variable 'c'","Time-to-peak (minutes)"]},submitButton:function(e){let t=new eC(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4]),Number(e[5]),e[6]);t.generateTab(),g(t)}})]}),(0,i.jsxs)(u.Z,{sx:{bgcolor:"primary.dark",display:"flex",color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)",boxShadow:"rgba(0, 0, 0, 0.25) 0px 28px 20px",minHeight:"70vh",width:"20%",height:"100%",padding:"2rem",overflow:"auto",flexDirection:"column",rowGap:"4rem"},children:[x?(0,i.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",rowGap:"2rem"},children:[(0,i.jsx)(_,{chartData:N,header:x.StormDescription,XLabel:"Time (minutes)",YLabel:"Intensity (mm/hr)",Context:"Rainfall Hyetograph based on provided inputs"}),(0,i.jsx)(eO,{bgcolor:"secondary",XLabel:"Time (minutes)",YLabel:" Rainfall Intensity (mm/hr)",XData:"string"==typeof x.Time?x.Time.split(","):x.time,YData:"string"==typeof x.Value?x.Value.split(","):x.intensity}),x.Id?null:(0,i.jsxs)(p.Z,{color:"secondary",variant:"contained",onClick:R,children:["SAVE",(0,i.jsx)(d.default,{src:H,height:"10%",width:"10%",alt:"save icon"})]}),function(){switch(I){case null:return null;case"Success":return(0,i.jsx)(K.Z,{style:O,severity:"success",children:"Data saved."});case"Error":return(0,i.jsx)(K.Z,{style:O,severity:"error",children:"Input error - please check your inputs."});case"Server Error":return(0,i.jsx)(K.Z,{style:O,severity:"error",children:"Server error: service temporarily unavailable."});default:return(0,i.jsx)(K.Z,{style:O,severity:"error",children:"Something unexpected occured. Please try again later."})}}()]}):null,o?(0,i.jsx)(U,{editingObject:h}):null]})]})}n.ZP.register(E.f$),n.ZP.register(E.uw);var eN=r(4444),eM=r(1705),eL=r(468);function eH(){return(0,i.jsxs)(b.Z,{square:!0,elevation:2,sx:{overflowX:"auto",width:"100%",color:"secondary.main",alignItems:"center",height:"8rem",backgroundColor:"primary.veryDark",justifyContent:"space-around",display:"flex"},children:[(0,i.jsx)("p",{children:"\xa9 2024 SWMShare."}),(0,i.jsx)($.Z,{color:"secondary",href:"About",children:"About"})]})}function eW(){let[e,t]=(0,s.useState)(!0),[r,n]=(0,s.useState)(null),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),v="#ffb300",S=(0,eN.Z)({components:{MuiFormHelperText:{styleOverrides:{root:{color:v,"&$error":{color:v}}}},MuiTypography:{styleOverrides:{root:{fontFamily:"inherit"}}},MuiAutocomplete:{styleOverrides:{popper:{backgroundColor:v},listbox:{backgroundColor:v}}},MuiMenu:{styleOverrides:{list:{'&[role="menu"]':{backgroundColor:v,color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"}}}},MuiInputBase:{styleOverrides:{input:{color:"black"}}},MuiFormLabel:{styleOverrides:{root:{color:"black",textShadow:"0px 0px 2px rgba(0, 0, 0, 0.26)"}}}},palette:{primary:{littleLight:"#546e75",main:"#455a60",veryDark:"#273235"},secondary:{main:v}}});function w(){b(!1)}let C=async e=>{try{let t=await fetch("/api/Account/UserInfo",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),r=await t.json();localStorage.setItem("Email",r.Email),o(r);let i=await fetch("/api/UrbanCatchments?userId=".concat(encodeURIComponent(r.Id)),{method:"GET"}),n=(await i.json()).map(e=>new T(e.Id,e.CatchmentDescription,Number(e.ImperviousPercent),Number(e.SlopePercent),Number(e.CurveNumber),Number(e.FlowLength)));p(n);let a=await fetch("/api/Storms?userId=".concat(encodeURIComponent(r.Id)),{method:"GET"}),s=(await a.json()).map(e=>new D(e.Id,e.StormDescription,e.Time.split(",").map(e=>Number(e)),e.Value.split(",").map(e=>Number(e))));h(s),console.log(d)}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{let e=localStorage.getItem("access_token");null!=e&&"undefined"!==e&&(t(!0),C(e))},[]),(0,i.jsx)(eM.Z,{theme:S,children:(0,i.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",bgcolor:"primary.dark",color:"primary.contrastText",height:"100vh",overflowX:"auto",minWidth:"100%"},children:[(0,i.jsx)(eS,{loginState:!!e,appView:y,loginButton:function(){t(!1),g(!1)},accountViewButton:function(){j(!0)},appViews:["HydroSim","StormTab"],setView:function(e){j(e)}}),!0===e?a?function(){switch(y){case null:case"HydroSim":return d?(0,i.jsx)(Q,{Id:a.Id,Storms:d,Catchments:m,Hydrographs:l}):(0,i.jsx)(u.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(eL.Z,{size:"4rem",color:"secondary"})});case"Account":return(0,i.jsx)(ew,{exitAccountViewButton:w});case"StormTab":return(0,i.jsx)(e_,{Id:a.Id,Storms:d})}}():(0,i.jsx)(Q,{}):(0,i.jsx)(eo,{isRegistering:x,handleNotRegistering:()=>{g(!1)},handleRegistering:()=>g(!0)}),(0,i.jsx)(eH,{})]})})}},9671:function(e){e.exports={main:"page_main__GlU4n",display:"page_display__Qsd9Y","context-menu":"page_context-menu__Ax_XR",description:"page_description__86bsR",code:"page_code__9lUUd",hydrographContainer:"page_hydrographContainer__9HsRc",catchmentSlot:"page_catchmentSlot__mzyiJ",stormSlot:"page_stormSlot__kaQWG",textSlot:"page_textSlot__1qIQa",center:"page_center__5oHG7","schematic-view":"page_schematic-view__Zx9ap",logo:"page_logo__7fc9l",card:"page_card__QV0Om",content:"page_content__kDoxQ",grid:"page_grid__f5Kdy",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[967,674,571,469,971,23,744],function(){return e(e.s=8222)}),_N_E=e.O()}]);